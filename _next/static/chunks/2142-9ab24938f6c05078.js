"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2142],{15673:function(e,t,n){n.d(t,{P:function(){return l}});var a=n(52322),r=n(53972);n(2784);var s=n(61335),i=n(98614),o=n(20324),d=n(48139);function l(e){let{approve:t,deposit:n}=e,{t:l}=(0,i.$G)("common");return(0,a.jsxs)("div",{className:"flex flex-row gap-3",children:[(0,a.jsxs)(r.ZP,{className:(0,o.m6)((0,s.cx)("text-xs",{"text-[#B4BCD0]":!t})),children:["1. ",l("STAKING.APPROVE")]}),(0,a.jsx)(d.PJ,{icon:"arrow_right_long",iconHeight:"13",iconWidth:"23",viewboxHeight:12,viewboxWidth:24,fillColor:"#F7F8F8"}),(0,a.jsxs)(r.ZP,{className:(0,o.m6)((0,s.cx)("text-xs",{"text-[#B4BCD0]":!n})),children:["2. ",l("STAKING.DEPOSIT")]})]})}},66712:function(e,t,n){n.d(t,{X:function(){return i}});var a=n(52322);n(2784);var r=n(53972),s=n(20324);function i(e){let{label:t,labelClassName:n,valueClassName:i,value:o}=e;return(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(r.ZP,{className:(0,s.m6)("text-xs	text-[#B4BCD0]",n),children:t}),(0,a.jsx)("div",{children:"string"==typeof o||"number"==typeof o?(0,a.jsx)(r.ZP,{className:(0,s.m6)("text-sm text-[#F7F8F8]",i),children:o}):o})]})}},36817:function(e,t,n){n.d(t,{t:function(){return u}});var a=n(52322),r=n(53972);n(2784);var s=n(66712),i=n(66003),o=n(98614),d=n(48139),l=n(20324);let c=e=>{let{className:t}=e;return(0,a.jsx)("div",{className:(0,l.m6)("border-b border-[#F7F8F8]",t)})};function u(e){let{pool:t,userPoolInfo:n,action:u,calculation:m,loading:p=!1}=e,{t:y}=(0,o.$G)("common"),x=(0,i.jh)(t,m),f="stake"===u;return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(r.ZP,{className:"pb-1 text-sm text-[#F7F8F8]",children:y("STAKING.DETAILS")}),(0,a.jsx)(c,{className:"my-2"}),(0,a.jsxs)("div",{className:(0,l.m6)(p?"animate-pulse":"","flex flex-col gap-3"),children:[(0,a.jsx)(s.X,{label:"".concat(t.depositTokenSymbol," ").concat(y("STAKING.STAKED")),value:"".concat(y("tokenAmount",{value:x.staked})," ").concat(x.tokenSymbol)}),(0,a.jsx)(s.X,{label:"".concat(t.depositTokenSymbol," ").concat(y("REP")),value:(0,a.jsxs)("div",{className:"gap1 flex flex-row items-center",children:[(0,a.jsx)(r.ZP,{className:"text-sm text-[#F7F8F8]",children:y("srep",{value:x.tentativeREP})}),(0,a.jsx)(d.PJ,{icon:f?"triangle_up":"triangle_down",iconHeight:"13",iconWidth:"13",viewboxHeight:"13",viewboxWidth:"10",fillColor:f?"#54FAAA":"#FB5656"})]})}),(0,a.jsx)(s.X,{label:y("STAKING.APR"),value:"".concat(x.apr,"%")}),(0,a.jsx)(s.X,{label:y("STAKING.UNLOCK_DATE"),value:"".concat(x.unlockDate)})]}),(0,a.jsx)(c,{className:"my-2"})]})}},92724:function(e,t,n){n.d(t,{N:function(){return i}});var a=n(52322),r=n(9258);let s={ControlContainer:{style:()=>({marginBottom:"0"})},Label:{style:e=>{let{$theme:t}=e;return{fontSize:t.sizing.scale500,color:t.colors.white,marginBottom:"0"}}}};function i(e){return(0,a.jsx)(r.Z,{overrides:s,...e})}},12236:function(e,t,n){n.d(t,{I:function(){return i}});var a=n(52322),r=n(19384);n(2784);let s={Root:{style:()=>({borderTopColor:"",borderBottomColor:"",borderLeftColor:"",borderRightColor:"",borderTopStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRightStyle:"none",backgroundColor:"#191A1E",borderBottomLeftRadius:"20px",borderBottomRightRadius:"20px",borderTopLeftRadius:"20px",borderTopRightRadius:"20px"})},Input:{style:e=>{let{$theme:t,$error:n,$disabled:a}=e;return{backgroundColor:"#191A1E",color:a?"#B4BCD0":n?"#FB5656":t.colors.white,paddingLeft:0,textAlign:"right"}}},StartEnhancer:{style:e=>{let{$theme:t}=e;return{backgroundColor:"#191A1E",fontWeight:t.typography.font150.fontWeight,fontSize:t.sizing.scale600,letterSpacing:"0.2px",flexShrink:0,color:t.colors.white}}},EndEnhancer:{style:e=>{let{$theme:t}=e;return{cursor:"pointer",backgroundColor:"#191A1E",fontWeight:t.typography.font150.fontWeight,fontSize:t.sizing.scale600,letterSpacing:"0.2px",flexShrink:0,color:t.colors.contentTertiary}}}};function i(e){return(0,a.jsx)(r.Z,{overrides:s,...e})}},50862:function(e,t,n){n.d(t,{u:function(){return c}});var a=n(52322),r=n(92724),s=n(19384),i=n(2784),o=n(98614),d=n(78246);let l={Root:{style:()=>({borderTopColor:"",borderBottomColor:"",borderLeftColor:"",borderRightColor:"",borderTopStyle:"none",borderBottomStyle:"none",borderLeftStyle:"none",borderRightStyle:"none",backgroundColor:"#191A1E",borderBottomLeftRadius:"20px",borderBottomRightRadius:"20px",borderTopLeftRadius:"20px",borderTopRightRadius:"20px"})},Input:{style:e=>{let{$theme:t,$error:n}=e;return{minWidth:"3.375rem",fontSize:"0.875rem",paddingTop:"0.25rem",paddingBottom:"0.25rem",paddingLeft:"0.75rem",paddingRight:"0.75rem",backgroundColor:"#191A1E",color:n?"#FB5656":t.colors.white,textAlign:"right"}}}},c=i.forwardRef(function(e,t){let{lockingPeriods:n,min:i,max:o,error:d,onChanePeriod:c,disabled:m,...p}=e;return(0,a.jsx)(r.N,{error:d,children:(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)("div",{className:"my-3 flex flex-row gap-2",children:n.map(t=>(0,a.jsx)(u,{prefix:e.prefix,active:p.value===t,disabled:m,onClick:c,period:t},t))}),(0,a.jsx)(s.Z,{min:Number(i)||void 0,max:Number(o)||void 0,type:"number",overrides:l,error:!!d,disabled:m,...p,inputRef:t})]})})});function u(e){let{t}=(0,o.$G)("common"),{active:n,period:r,prefix:s="",disabled:i=!1,onClick:l}=e;return(0,a.jsxs)(d.z,{type:"button",disabled:i,size:"small",className:"flex flex-row items-end justify-end",style:n?"outline-dark":"neutral-dark",onClick:()=>l(r),children:[(0,a.jsxs)("div",{className:"text-sm",children:[s,r]}),"\xa0",(0,a.jsx)("div",{className:"mb-px text-[0.6rem] capitalize",children:t("day",{count:r})})]})}},21745:function(e,t,n){n.d(t,{A:function(){return u}});var a=n(52322),r=n(2784),s=n(96577),i=n.n(s),o=n(53972),d=n(38531),l=n(12236),c=n(92724);let u=r.forwardRef(function(e,t){let{label:n,maxcontrol:r=!0,tokenSymbol:s,min:u,max:m,onMax:p,error:y,...x}=e;return(0,a.jsx)(c.N,{label:n,error:y,caption:r?(0,a.jsx)("div",{className:"flex flex-row justify-end",children:(0,a.jsx)(d.Z,{type:"button",onClick:()=>{p()},className:"bg-transparent p-1 text-sm text-[#2E5BFF]",children:"MAX"})}):null,children:(0,a.jsx)(l.I,{...x,min:Number(u)||void 0,max:Number(m)||void 0,type:"number",step:"any",inputRef:t,startEnhancer:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(i(),{height:32,width:32,src:"/image/token/".concat(s,".svg"),alt:s}),(0,a.jsx)(o.ZP,{className:"text-sm font-normal",children:s})]})})})})},73137:function(e,t,n){n.d(t,{p:function(){return P}});var a=n(52322);n(2784);var r=n(14013),s=n(9906),i=n(57143),o=n(64749),d=n(96577),l=n.n(d),c=n(98614),u=n(12236),m=n(92724),p=n(53972),y=n(78246),x=n(10528),f=n(21745),h=n(50862),A=n(36817),T=n(68378),b=n(30408),N=n(49641),g=n(62794),S=n(65368),v=n(15673),k=n(63955),E=n(79789),I=n(52702),j=n(78183),C=n(50068),w=n(5632),_=n(61135),R=n(27481);function P(e){var t,n,d,P;let{open:D,poolId:O,onOpenChange:G}=e,{t:L}=(0,c.$G)("common"),M=(0,r.d)(834),K=(0,s.pm)(),F=(0,C.mA)(),B=(0,w.useRouter)(),{data:U=[]}=(0,g.hQ)({},null===(t=B.query)||void 0===t?void 0:t.id),Z=U.find(e=>e.id===O),V=(0,o.xW)(Z.chainId),{data:W}=(0,T.mM)({address:F.address,addressToken:Z.depositTokenAddress,chainId:Z.chainId,enabled:!!F.address&&D}),q=(0,I.vk)({tokenAmount:{label:L("STAKING.TOKEN_AMOUNT"),min:"1",max:(0,b.b)(W,Z.depositTokenDecimals),required:!0,decimals:Z.depositTokenDecimals},lockedPeriod:{label:L("STAKING.LOCKED_PERIOD"),min:T.Z7,max:(0,S.i8)(Number(Z.MAX_LOCKING_PERIOD)),required:!0}}),z=(0,k.cI)({resolver:(0,E.X)(q),mode:"onChange",reValidateMode:"onBlur",defaultValues:{tokenAmount:"0",lockedPeriod:T.hF}}),X=z.watch("lockedPeriod"),Q=z.watch("tokenAmount"),H=(0,b.v)(Q||"0",Z.depositTokenDecimals),$=e=>{G(e)},Y=(0,T.yA)({tokenAmount:H.toString(),tokenAddress:Z.depositTokenAddress,address:Z.stakingContractAddress,enabled:z.formState.isValid&&D}),J=(0,T.yG)({tokenAddress:Z.depositTokenAddress,addressOwner:F.address,addressSpender:Z.stakingContractAddress,enabled:z.formState.isValid&&F.address&&D}),ee=x.O$.from(J.data||0),et=H.gt(ee),en=(0,T.Qo)({contractAddress:Z.stakingContractAddress,tokenAmount:H.toString(),lockedPeriod:(0,S.G3)(X),enabled:H.gt(0)&&z.formState.isValid&&!et&&D}),ea=(0,g.Ut)({walletAddress:F.address,query:{enabled:!!F.address&&D}}),er=(0,g.ni)({poolContractAddress:Z.stakingContractAddress,walletAddress:F.address,chainId:Z.chainId,query:{enabled:!!F.address}}),es=(0,g.c6)(),ei=async()=>{if(en.prepare.isError){K({title:en.prepare.error.message,description:L("STAKING.FAILED_TO_REQUEST_DEPOSIT"),type:"error"});return}try{let e=await en.contract.writeAsync();await (0,N.M)({chainId:Z.chainId,hash:e.hash,connectorId:F.connector.id}),await es.mutateAsync(),K({title:L("STAKING.DEPOSIT_SUCCESS"),description:"Code: ".concat(e.hash),type:"success"}),await ea.refetch(),$(!1)}catch(e){console.log("### deposit error",e),j.Tb(e),K({title:L("ERROR_MESSAGES.ERROR"),description:L("STAKING.FAILED_TO_REQUEST_DEPOSIT"),type:"error"})}},eo=(0,g.yj)({poolContractAddress:Z.stakingContractAddress,walletAddress:F.address,chainId:Z.chainId,lockedPeriod:(0,S.G3)(X),tokenAmount:H.toString(),query:{enabled:!!F.address&&H.gt(0)&&D}}),ed=async()=>{if(Y.prepare.isError){K({title:Y.prepare.error.message,description:L("STAKING.FAILED_TO_REQUEST_APPROVE"),type:"error"});return}try{let e=await Y.contract.writeAsync();await (0,N.M)({chainId:Z.chainId,hash:e.hash,connectorId:F.connector.id}),K({title:L("STAKING.APPROVE_SUCCESS"),description:"Code: ".concat(e.hash),type:"success"}),await J.refetch()}catch(e){console.log("### approve error",e),j.Tb(e),K({title:L("ERROR_MESSAGES.ERROR"),description:L("STAKING.FAILED_TO_REQUEST_APPROVE"),type:"error"})}},el=async()=>{if(et)return await ed();await ei()};return(0,a.jsx)(i.k.Root,{modal:!0,open:D,onOpenChange:$,children:(0,a.jsx)(i.k.Content,{variant:"dark",fullscreen:M,scrollable:!0,onInteractOutside:e=>{e.preventDefault()},children:(0,a.jsxs)("form",{onSubmit:z.handleSubmit(el),children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(i.k.Title,{variant:"dark",children:L("STAKING.MODAL_STAKE_TITLE")}),(0,a.jsx)(i.k.Close,{variant:"dark"})]}),(0,a.jsxs)(i.k.Body,{variant:"dark",className:"rounded-t-main mb-5 pt-3",children:[(0,a.jsx)(m.N,{label:(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(p.ZP,{className:"text-sm text-[#B4BCD0]",children:L("STAKING.NETWORK")})}),children:(0,a.jsx)(u.I,{value:"",type:"text",disabled:!0,startEnhancer:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l(),{alt:V.nativeCurrency.symbol,src:"/image/token/".concat(V.nativeCurrency.symbol,".svg"),height:32,width:32}),(0,a.jsx)(p.ZP,{className:"text-sm font-normal",children:null!==(P=V.name)&&void 0!==P?P:V.shortName})]})})}),(0,a.jsx)(f.A,{tokenSymbol:Z.depositTokenSymbol,error:null===(n=z.formState.errors.tokenAmount)||void 0===n?void 0:n.message,onMax:()=>{z.setValue("tokenAmount",(0,b.b)(W,Z.depositTokenDecimals)),z.trigger("tokenAmount")},max:(0,b.b)(W,Z.depositTokenDecimals),label:(0,a.jsx)("div",{className:"flex flex-row justify-end",children:(0,a.jsxs)(p.ZP,{className:"text-xs text-[#B4BCD0]",children:[L("STAKING.BALANCE")," :"," ",L("tokenAmount",{value:(0,b.b)(W,Z.depositTokenDecimals)})," ",Z.depositTokenSymbol]})}),...z.register("tokenAmount")}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)(_.Z,{as:"p",className:"text-sm",children:L("STAKING.CHOOSE_LOCKED_PERIOD")}),(0,a.jsx)(_.Z,{as:"p",className:"text-sm",children:(0,R.NH)((0,S.PS)((0,S.G3)(X)+Date.now()/1e3))})]}),(0,a.jsx)(h.u,{value:z.getValues().lockedPeriod,onChanePeriod:e=>{z.setValue("lockedPeriod",e),z.trigger("lockedPeriod")},error:null===(d=z.formState.errors.lockedPeriod)||void 0===d?void 0:d.message,lockingPeriods:Z.defaultLockingPeriods,...z.register("lockedPeriod")})]}),(0,a.jsxs)(i.k.Body,{variant:"dark",className:"rounded-t-main pt-3",children:[(0,a.jsx)(A.t,{userPoolInfo:er.data,pool:Z,action:"stake",loading:eo.isFetching,calculation:eo.data}),(0,a.jsx)(v.P,{approve:et,deposit:!et})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-4 px-8",children:[(0,a.jsx)(y.z,{onClick:()=>$(!1),disabled:Y.contract.isLoading||en.contract.isLoading,style:"outline",children:L("STAKING.CANCEL")}),et?(0,a.jsx)(y.z,{type:"submit",loading:Y.contract.isLoading||Y.prepare.isFetching||z.formState.isSubmitting,disabled:Y.contract.isLoading||Y.prepare.isFetching||z.formState.isSubmitting||!z.formState.isValid,children:L("STAKING.APPROVE")}):(0,a.jsx)(y.z,{type:"submit",loading:en.contract.isLoading||en.prepare.isFetching||z.formState.isSubmitting,disabled:en.contract.isLoading||en.prepare.isFetching||z.formState.isSubmitting||!z.formState.isValid,children:L("STAKING.DEPOSIT")})]})]})})})}},51089:function(e,t,n){n.d(t,{T:function(){return b}});var a=n(52322),r=n(2784),s=n(14013),i=n(9906),o=n(57143),d=n(98614),l=n(78246),c=n(68378),u=n(49641),m=n(30408),p=n(21745),y=n(62794),x=n(78183),f=n(50068),h=n(63955),A=n(5632),T=n(66003);function b(e){var t;let{open:n,poolId:b,onOpenChange:N}=e,{t:g}=(0,d.$G)("common"),S=(0,s.d)(834),v=(0,i.pm)(),k=(0,f.mA)(),E=(0,A.useRouter)(),{data:I=[]}=(0,y.hQ)({},null===(t=E.query)||void 0===t?void 0:t.id),j=I.find(e=>e.id===b),C=(0,y.ni)({poolContractAddress:j.stakingContractAddress,walletAddress:k.address,chainId:j.chainId,query:{enabled:!!k.address}}),w=e=>{N(e)},_=(0,r.useMemo)(()=>{let e=(0,T.wg)(C.data.claimable||"0",(null==j?void 0:j.rewardsCommissionPercentage)||0);return parseFloat((0,m.b)(e,j.rewardsTokenDecimals).toString())},[j,C.isFetched]),R=(0,c.z7)({contractAddress:j.stakingContractAddress,enabled:n&&Number(_)>0}),P=(0,h.cI)(),D=async()=>{if(R.prepare.isError){v({title:R.prepare.error.message,description:g("STAKING.FAILED_TO_REQUEST_CLAIM"),type:"error"});return}try{let e=await R.contract.writeAsync();await (0,u.M)({chainId:j.chainId,hash:e.hash,connectorId:k.connector.id}),v({title:g("STAKING.CLAIM_SUCCESS"),description:"Code: ".concat(e.hash),type:"success"}),w(!1)}catch(e){console.log("### claim error",e),x.Tb(e),v({title:g("ERROR_MESSAGES.ERROR"),description:g("STAKING.FAILED_TO_REQUEST_CLAIM"),type:"error"})}},O=async()=>{await D()};return(0,a.jsx)(o.k.Root,{open:n,onOpenChange:w,children:(0,a.jsx)(o.k.Content,{variant:"dark",fullscreen:S,onInteractOutside:e=>{e.preventDefault()},children:(0,a.jsxs)("form",{onSubmit:P.handleSubmit(O),children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(o.k.Title,{variant:"dark",children:g("STAKING.MODAL_CLAIM_TITLE")}),(0,a.jsx)(o.k.Close,{variant:"dark"})]}),(0,a.jsx)(o.k.Body,{variant:"dark",className:"rounded-t-main pb-6 pt-6",children:(0,a.jsx)(p.A,{value:_,disabled:!0,maxcontrol:!1,onChange:()=>{},tokenSymbol:j.depositTokenSymbol})}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-4 px-8",children:[(0,a.jsx)(l.z,{onClick:()=>w(!1),disabled:R.contract.isLoading,style:"outline",children:g("STAKING.CANCEL")}),(0,a.jsx)(l.z,{type:"submit",loading:R.contract.isLoading||R.prepare.isFetching||P.formState.isSubmitting,disabled:R.contract.isLoading||R.prepare.isFetching||P.formState.isSubmitting,children:g("STAKING.CLAIM")})]})]})})})}},45509:function(e,t,n){n.d(t,{a:function(){return k}});var a=n(52322),r=n(2784),s=n(14013),i=n(9906),o=n(57143),d=n(98614),l=n(78246),c=n(50862),u=n(36817),m=n(68378),p=n(49641),y=n(62794),x=n(65368),f=n(52702),h=n(63955),A=n(79789),T=n(78183),b=n(96501),N=n(50068),g=n(45114),S=n(29440),v=n(5632);function k(e){var t,n;let{open:k,poolId:E,onOpenChange:I}=e,{t:j}=(0,d.$G)("common"),C=(0,s.d)(834),w=(0,i.pm)(),_=(0,N.mA)(),R=(0,v.useRouter)(),{data:P}=(0,b.N)({queryKey:[g.S.CHAIN_BLOCK],watch:!1}),{data:D=[]}=(0,y.hQ)({},null===(t=R.query)||void 0===t?void 0:t.id),O=D.find(e=>e.id===E),G=e=>{I(e)},L=(0,y.ni)({poolContractAddress:O.stakingContractAddress,walletAddress:_.address,chainId:O.chainId,query:{enabled:!!_.address}}),M=(0,S._j)(L.data,P.timestamp),K=Math.floor((0,x.i8)(Number(O.MAX_LOCKING_PERIOD)-M)),F=(0,f.Ac)({lockedPeriod:{label:j("STAKING.TOKEN_AMOUNT"),min:Math.min(1,K),max:K,required:!0}}),B=(0,h.cI)({resolver:(0,A.X)(F),mode:"onChange",reValidateMode:"onBlur",defaultValues:{lockedPeriod:1}}),U=(0,r.useMemo)(()=>(0,x.i8)(Number(O.MAX_LOCKING_PERIOD)),[O]),Z=B.watch("lockedPeriod"),V=(0,S.SE)(L.data,(0,x.G3)(Z),P.timestamp),W=(0,m.Qo)({contractAddress:O.stakingContractAddress,tokenAmount:"0",lockedPeriod:V,enabled:k&&B.formState.isValid}),q=(0,y.PR)({poolContractAddress:O.stakingContractAddress,walletAddress:_.address,chainId:O.chainId,lockedPeriod:(0,x.G3)(Z),query:{enabled:!!_.address&&B.formState.isValid&&k}}),z=(0,y.Ut)({walletAddress:_.address,query:{enabled:!!_.address}}),X=(0,y.c6)(),Q=async()=>{if(W.prepare.isError){w({title:W.prepare.error.message,description:j("STAKING.FAILED_TO_REQUEST_EXTEND"),type:"error"});return}try{let e=await W.contract.writeAsync();await (0,p.M)({chainId:O.chainId,hash:e.hash,connectorId:_.connector.id}),await X.mutateAsync(),w({title:j("STAKING.EXTEND_SUCCESS"),description:"Code: ".concat(e.hash),type:"success"}),await z.refetch(),G(!1)}catch(e){console.log("### deposit",W),console.log("### extent error",e),T.Tb(e),w({title:j("ERROR_MESSAGES.ERROR"),description:j("STAKING.FAILED_TO_REQUEST_EXTEND"),type:"error"})}},H=async()=>{await Q()},$=0===K;return(0,a.jsx)(o.k.Root,{open:k,onOpenChange:G,children:(0,a.jsx)(o.k.Content,{variant:"dark",fullscreen:C,children:(0,a.jsxs)("form",{onSubmit:B.handleSubmit(H),children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(o.k.Title,{variant:"dark",children:j("STAKING.MODAL_EXTEND_TITLE")}),(0,a.jsx)(o.k.Close,{variant:"dark"})]}),(0,a.jsx)(o.k.BodyTitle,{variant:"dark",children:j("STAKING.EXTEND_LOCKED_PERIOD_BY")}),(0,a.jsxs)(o.k.Body,{variant:"dark",children:[(0,a.jsx)(c.u,{onChanePeriod:e=>{B.setValue("lockedPeriod",e),B.trigger("lockedPeriod")},lockingPeriods:O.defaultLockingPeriods,error:$?j("STAKING.REACH_LIMIT_OF_LOCKED_PERIOD",{value:U}):null===(n=B.formState.errors.lockedPeriod)||void 0===n?void 0:n.message,disabled:$,...B.register("lockedPeriod")}),(0,a.jsx)(u.t,{userPoolInfo:L.data,action:"stake",pool:O,loading:q.isFetching,calculation:q.data})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-4 px-8",children:[(0,a.jsx)(l.z,{onClick:()=>G(!1),disabled:W.contract.isLoading,style:"outline",children:j("STAKING.CANCEL")}),(0,a.jsx)(l.z,{type:"submit",loading:W.contract.isLoading||W.prepare.isFetching||B.formState.isSubmitting,disabled:W.prepare.isFetching||W.contract.isLoading||B.formState.isSubmitting||!B.formState.isValid,children:j("STAKING.EXTEND")})]})]})})})}},13365:function(e,t,n){n.d(t,{b:function(){return K}});var a=n(52322),r=n(2784),s=n(64749),i=n(14013),o=n(9906),d=n(57143),l=n(79789),c=n(78183),u=n(10528),m=n(96577),p=n.n(m),y=n(5632),x=n(63955),f=n(98614),h=n(53972),A=n(96501),T=n(15673),b=n(78246),N=n(21745),g=n(36817),S=n(62794),v=n(68378),k=n(52702),E=n(29440),I=n(45114),j=n(65368),C=n(30408),w=n(49641),_=n(50068),R=n(92724),P=n(12236),D=n(61135),O=n(27481),G=n(37337),L=n(50862),M=n(38995);function K(e){var t,n,m,K,F,B;let{open:U,poolId:Z,onOpenChange:V}=e,{t:W}=(0,f.$G)("common"),q=(0,i.d)(834),z=(0,o.pm)(),X=(0,_.mA)(),Q=(0,y.useRouter)(),{data:H}=(0,A.N)({queryKey:[I.S.CHAIN_BLOCK],watch:!1}),{data:$=[]}=(0,S.hQ)({query:{keepPreviousData:!1}},null===(t=Q.query)||void 0===t?void 0:t.id),Y=$.find(e=>e.id===Z),J=(0,s.xW)(Y.chainId),{data:ee}=(0,v.mM)({address:X.address,addressToken:Y.depositTokenAddress,chainId:Y.chainId,enabled:!!X.address&&U}),et=(0,S.ni)({poolContractAddress:Y.stakingContractAddress,walletAddress:X.address,chainId:Y.chainId,query:{enabled:!!X.address&&U}}),en=(0,E._j)(et.data,H.timestamp),ea=Math.floor((0,j.i8)(Number(Y.MAX_LOCKING_PERIOD)-en)),[er,es]=(0,r.useState)(M.P1.KEEP_CURRENT),[ei,eo]=(0,r.useState)(M.nW.KEEP_CURRENT),ed=er===M.P1.STAKE_MORE,el=ei===M.nW.EXTEND,ec=!el&&ed,eu=!ed&&el,em=ed&&el,ep=!ed&&!el,ey=(0,k.vk)({tokenAmount:{label:W("STAKING.TOKEN_AMOUNT"),min:em||ec?"1":"0",max:(0,C.b)(ee,Y.depositTokenDecimals),decimals:Y.depositTokenDecimals,required:ec||ep},lockedPeriod:{label:W("STAKING.TOKEN_AMOUNT"),min:em||eu?1:0,max:ea,required:eu||ep}}),ex=(0,x.cI)({resolver:(0,l.X)(ey),mode:"onChange",reValidateMode:"onBlur",defaultValues:{tokenAmount:"0",lockedPeriod:0}}),ef=ex.watch("lockedPeriod"),eh=ex.watch("tokenAmount"),eA=(0,C.v)(eh||"0",Y.depositTokenDecimals),eT=e=>{V(e)},eb=(0,v.yA)({tokenAmount:eA.toString(),tokenAddress:Y.depositTokenAddress,address:Y.stakingContractAddress,enabled:ex.formState.isValid&&U}),eN=(0,v.yG)({tokenAddress:Y.depositTokenAddress,addressOwner:X.address,addressSpender:Y.stakingContractAddress,enabled:X.address&&U}),eg=u.O$.from(eN.data||0),eS=eA.gt(eg),ev=(0,E.SE)(et.data,(0,j.G3)(ef),H.timestamp),ek=(0,v.Qo)({contractAddress:Y.stakingContractAddress,tokenAmount:eA.toString(),lockedPeriod:ev,enabled:ex.formState.isValid&&!eS&&U}),eE=(0,S.Ut)({walletAddress:X.address,query:{enabled:!!X.address&&U}}),eI=(0,S.c6)(),ej=async()=>{if(ek.prepare.isError){z({title:ek.prepare.error.message,description:W("STAKING.FAILED_TO_REQUEST_DEPOSIT"),type:"error"});return}try{let e=await ek.contract.writeAsync();await (0,w.M)({chainId:Y.chainId,hash:e.hash,connectorId:X.connector.id}),await eI.mutateAsync(),z({title:W("STAKING.DEPOSIT_SUCCESS"),description:"Code: ".concat(e.hash),type:"success"}),await eE.refetch(),eT(!1)}catch(e){console.log("### deposit",ek),console.log("### error",e),c.Tb(e),z({title:W("ERROR_MESSAGES.ERROR"),description:W("STAKING.FAILED_TO_REQUEST_DEPOSIT"),type:"error"})}},eC=(0,S.AG)({poolContractAddress:Y.stakingContractAddress,walletAddress:X.address,chainId:Y.chainId,lockedPeriod:(0,j.G3)(ef),tokenAmount:eA.toString(),query:{enabled:!!X.address&&U}}),ew=async()=>{if(eb.prepare.isError){z({title:eb.prepare.error.message,description:W("STAKING.FAILED_TO_REQUEST_APPROVE"),type:"error"});return}try{let e=await eb.contract.writeAsync();await (0,w.M)({chainId:Y.chainId,hash:e.hash,connectorId:X.connector.id}),z({title:W("STAKING.APPROVE_SUCCESS"),description:"Code: ".concat(e.hash),type:"success"}),await eN.refetch()}catch(e){console.log("### error",e),z({title:W("ERROR_MESSAGES.ERROR"),description:W("STAKING.FAILED_TO_REQUEST_APPROVE"),type:"error"})}},e_=(0,r.useMemo)(()=>(0,j.i8)(Number(Y.MAX_LOCKING_PERIOD)),[Y]),eR=async()=>{if(eS)return await ew();await ej()};return(0,a.jsx)(d.k.Root,{open:U,onOpenChange:eT,children:(0,a.jsx)(d.k.Content,{variant:"dark",fullscreen:q,scrollable:!0,onInteractOutside:e=>{e.preventDefault()},children:(0,a.jsxs)("form",{onSubmit:ex.handleSubmit(eR),children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(d.k.Title,{variant:"dark",children:W("STAKING.MODAL_STAKE_MORE_TITLE")}),(0,a.jsx)(d.k.Close,{variant:"dark"})]}),(0,a.jsxs)(d.k.Body,{variant:"dark",className:"rounded-t-main mb-5",children:[(0,a.jsx)(R.N,{label:(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(h.ZP,{className:"text-sm text-[#B4BCD0]",children:W("STAKING.NETWORK")})}),children:(0,a.jsx)(P.I,{value:"",type:"text",disabled:!0,startEnhancer:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p(),{alt:J.nativeCurrency.symbol,src:"/image/token/".concat(J.nativeCurrency.symbol,".svg"),height:32,width:32}),(0,a.jsx)(h.ZP,{className:"text-sm font-normal",children:null!==(B=J.name)&&void 0!==B?B:J.shortName})]})})}),(0,a.jsxs)("div",{className:"gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-between py-2",children:[(0,a.jsx)(D.Z,{className:"text-sm",children:W("STAKING.CURRENT_STAKED_AMOUNT")}),(0,a.jsxs)(D.Z,{className:"text-sm",children:[W("tokenAmount",{value:(0,C.b)((null==et?void 0:null===(n=et.data)||void 0===n?void 0:n.totalStaked)||0,Y.depositTokenDecimals)})," ",Y.depositTokenSymbol]})]}),(0,a.jsx)(D.Z,{as:"p",className:"py-2 text-xs text-[#B4BCD0]",children:W("STAKING.ADD_MORE")}),(0,a.jsx)(G.G,{style:"dark",size:"small",value:er,onChange:e=>{es(e),ex.resetField("tokenAmount")},options:[{label:W("STAKING.KEEP_CURRENT_AMOUNT"),value:M.P1.KEEP_CURRENT},{label:W("STAKING.ADD_MORE_AMOUNT"),value:M.P1.STAKE_MORE}]}),ed&&(0,a.jsx)(N.A,{tokenSymbol:Y.depositTokenSymbol,error:null===(m=ex.formState.errors.tokenAmount)||void 0===m?void 0:m.message,onMax:()=>{ex.setValue("tokenAmount",(0,C.b)(ee,Y.depositTokenDecimals)),ex.trigger("tokenAmount")},label:(0,a.jsx)("div",{className:"flex flex-row justify-end",children:(0,a.jsxs)(h.ZP,{className:"text-xs text-[#B4BCD0]",children:[W("STAKING.BALANCE")," :"," ",W("tokenAmount",{value:(0,C.b)(ee,Y.depositTokenDecimals)})," ",Y.depositTokenSymbol]})}),...ex.register("tokenAmount")})]}),(0,a.jsx)("div",{className:"my-5 border-b border-[#F7F8F8]"}),(0,a.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,a.jsx)(D.Z,{as:"p",className:"text-sm",children:W("STAKING.CURRENT_UNLOCK_DATE")}),(0,a.jsxs)("div",{className:"flex flex-col items-end",children:[(0,a.jsx)(D.Z,{className:"text-sm",children:(0,O.NH)((0,O.DK)(parseInt((null==et?void 0:null===(K=et.data)||void 0===K?void 0:K.unlockDate)||"0",10)))}),(0,a.jsxs)(D.Z,{className:"text-xs text-[#B4BCD0]",children:[Math.ceil((0,j.i8)(en))," ",W("day",{count:Math.ceil((0,j.i8)(en))})]})]})]}),(0,a.jsx)(D.Z,{as:"p",className:"py-2 text-xs text-[#B4BCD0]",children:W("STAKING.EXTEND_UNLOCK_DATE")}),(0,a.jsx)("div",{children:(0,a.jsx)(G.G,{style:"dark",size:"small",value:ei,onChange:e=>{eo(e),ex.resetField("lockedPeriod")},options:[{label:W("STAKING.KEEP_CURRENT_PERIOD"),value:M.nW.KEEP_CURRENT},{label:W("STAKING.EXTEND_PERIOD"),value:M.nW.EXTEND}]})}),el&&(0,a.jsxs)("div",{children:[(0,a.jsx)(L.u,{prefix:"+",onChanePeriod:e=>{ex.setValue("lockedPeriod",e),ex.trigger("lockedPeriod")},lockingPeriods:Y.defaultLockingPeriods,error:0===ea&&ex.getValues().lockedPeriod>0?W("STAKING.REACH_LIMIT_OF_LOCKED_PERIOD",{value:e_}):null===(F=ex.formState.errors.lockedPeriod)||void 0===F?void 0:F.message,...ex.register("lockedPeriod"),value:ex.getValues().lockedPeriod}),(0,a.jsxs)(D.Z,{as:"p",className:"text-xs text-[#B4BCD0]",children:[W("STAKING.MAX_EXTENSION_DAYS",{days:ea})," ",W("day",{count:ea})]})]})]}),(0,a.jsxs)(d.k.Body,{variant:"dark",className:"rounded-t-main pt-5",children:[(0,a.jsx)(g.t,{pool:Y,loading:eC.isFetching,userPoolInfo:et.data,action:"stake",calculation:eC.data}),(0,a.jsx)("div",{className:"pb-3 pt-4",children:(0,a.jsx)(T.P,{approve:eS,deposit:!eS})})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-4 px-8",children:[(0,a.jsx)(b.z,{type:"reset",onClick:()=>eT(!1),disabled:ek.contract.isLoading||eb.contract.isLoading,className:"border border-white bg-transparent px-5 py-0.5 text-base",children:W("STAKING.CANCEL")}),eS?(0,a.jsx)(b.z,{type:"submit",loading:eb.contract.isLoading||eb.prepare.isFetching||ex.formState.isSubmitting,disabled:ep||eb.contract.isLoading||eb.prepare.isFetching||!ex.formState.isValid||ex.formState.isSubmitting,children:W("STAKING.APPROVE")}):(0,a.jsx)(b.z,{type:"submit",loading:ek.contract.isLoading||ek.prepare.isFetching||ex.formState.isSubmitting,disabled:ep||ek.contract.isLoading||ek.prepare.isFetching||!ex.formState.isValid||ex.formState.isSubmitting,children:eu?W("STAKING.EXTEND"):W("STAKING.DEPOSIT")})]})]})})})}},22439:function(e,t,n){n.d(t,{H:function(){return R}});var a=n(52322),r=n(2784),s=n(14013),i=n(9906),o=n(57143),d=n(64749),l=n(96577),c=n.n(l),u=n(98614),m=n(12236),p=n(92724),y=n(53972),x=n(78246),f=n(21745),h=n(36817),A=n(68378),T=n(49641),b=n(62794),N=n(30408),g=n(66712),S=n(66003),v=n(20324);function k(e){let{pool:t,loading:n=!1,calculation:r}=e,{t:s}=(0,u.$G)("common"),i=(0,S.Tx)(t,r);return(0,a.jsxs)("div",{className:(0,v.m6)(n?"animate-pulse":"","flex flex-col gap-3"),children:[(0,a.jsx)(g.X,{label:s("STAKING.CALCULATION"),value:"".concat(i.withdrawFeePercentage,"% * ").concat(s("STAKING.DAYS_LEFT"))}),(0,a.jsx)(g.X,{label:s("STAKING.DAYS_LEFT"),value:"".concat(i.daysLeft," ").concat(s("day",{count:parseInt(i.daysLeft,10)}))}),(0,a.jsx)(g.X,{label:s("STAKING.EARLY_WITHDRAW_PENALTY"),labelClassName:"text-[#FB5656]",valueClassName:"text-[#FB5656]",value:"".concat(s("tokenAmount",{value:i.penalty,maximumFractionDigits:5})," ").concat(t.depositTokenSymbol)})]})}var E=n(52702),I=n(63955),j=n(79789),C=n(78183),w=n(50068),_=n(5632);function R(e){var t,n,l,v,R;let{open:P,poolId:D,onOpenChange:O}=e,{t:G}=(0,u.$G)("common"),L=(0,s.d)(834),M=(0,i.pm)(),K=(0,w.mA)(),F=(0,_.useRouter)(),{data:B=[]}=(0,b.hQ)({},null===(t=F.query)||void 0===t?void 0:t.id),U=B.find(e=>e.id===D),Z=(0,d.xW)(U.chainId),{data:V=[]}=(0,A.gM)({contractAddress:U.stakingContractAddress,address:K.address,enabled:P}),W=(0,N.b)(V[0]||0,U.depositTokenDecimals),q=(0,E.o2)({tokenAmount:{label:G("STAKING.TOKEN_AMOUNT"),max:W,min:"1",decimals:U.depositTokenDecimals,required:!0}}),z=(0,I.cI)({resolver:(0,j.X)(q),mode:"onChange",reValidateMode:"onChange",defaultValues:{tokenAmount:"0"}}),X=(0,I.qo)({control:z.control}),Q=(0,N.v)(z.getFieldState("tokenAmount").invalid?0:z.getValues("tokenAmount"),U.depositTokenDecimals),H=(0,A.Qc)({contractAddress:U.stakingContractAddress,tokenAmount:Q.toString(),enabled:P&&z.formState.isValid}),$=e=>{O(e)},Y=(0,b.f6)({poolContractAddress:U.stakingContractAddress,walletAddress:K.address,chainId:U.chainId,tokenAmount:Q.toString(),query:{enabled:P&&z.formState.isValid}}),J=(0,b.Ut)({walletAddress:K.address,query:{enabled:!!K.address}}),ee=(0,b.ni)({poolContractAddress:U.stakingContractAddress,walletAddress:K.address,chainId:U.chainId,query:{enabled:!!K.address}}),et=async()=>{if(H.prepare.isError){M({title:H.prepare.error.message,description:G("STAKING.FAILED_TO_REQUEST_WITHDRAW"),type:"error"});return}try{let e=await H.contract.writeAsync();await (0,T.M)({chainId:U.chainId,hash:e.hash,connectorId:K.connector.id}),M({title:G("STAKING.WITHDRAW_SUCCESS"),description:"Code: ".concat(e.hash),type:"success"}),await J.refetch(),$(!1)}catch(e){console.log("### withdraw",H),console.log("### error",e),C.Tb(e),M({title:G("ERROR_MESSAGES.ERROR"),description:G("STAKING.FAILED_TO_REQUEST_WITHDRAW"),type:"error"})}},en=async()=>{await et()};(0,r.useEffect)(()=>{Number(X.tokenAmount)>0&&z.trigger("tokenAmount")},[X]);let ea=(0,S.Tx)(U,Y.data),er=null===(n=Y.data)||void 0===n||!n.penalty||(null===(l=Y.data)||void 0===l?void 0:l.penalty)!=="0";return(0,a.jsx)(o.k.Root,{open:P,onOpenChange:$,children:(0,a.jsx)(o.k.Content,{variant:"dark",fullscreen:L,scrollable:!0,onInteractOutside:e=>{e.preventDefault()},children:(0,a.jsxs)("form",{onSubmit:z.handleSubmit(en),children:[(0,a.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,a.jsx)(o.k.Title,{variant:"dark",children:G("STAKING.MODAL_WITHDRAW_TITLE")}),(0,a.jsx)(o.k.Close,{variant:"dark"})]}),(0,a.jsxs)(o.k.BodyTitle,{variant:"dark",children:[G("STAKING.AVAILABLE")," ",U.depositTokenSymbol]}),(0,a.jsxs)(o.k.Body,{variant:"dark",className:"mb-5",children:[(0,a.jsx)(p.N,{label:(0,a.jsx)("div",{className:"flex flex-row",children:(0,a.jsx)(y.ZP,{className:"text-sm text-[#B4BCD0]",children:G("STAKING.NETWORK")})}),children:(0,a.jsx)(m.I,{value:"",type:"text",disabled:!0,startEnhancer:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c(),{alt:Z.nativeCurrency.symbol,src:"/image/token/".concat(Z.nativeCurrency.symbol,".svg"),height:32,width:32}),(0,a.jsx)(y.ZP,{className:"text-sm font-normal",children:null!==(R=Z.name)&&void 0!==R?R:Z.shortName})]})})}),(0,a.jsx)(f.A,{tokenSymbol:U.depositTokenSymbol,error:null===(v=z.formState.errors.tokenAmount)||void 0===v?void 0:v.message,onMax:()=>{z.setValue("tokenAmount",W),z.trigger("tokenAmount")},...z.register("tokenAmount"),label:(0,a.jsx)("div",{className:"flex flex-row justify-end",children:(0,a.jsxs)(y.ZP,{className:"text-xs text-[#B4BCD0]",children:[G("STAKING.BALANCE")," :"," ",G("tokenAmount",{value:W})," ",U.depositTokenSymbol]})})})]}),er?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.k.BodyTitle,{variant:"dark",children:G("STAKING.WITHDRAW_TERMS")}),(0,a.jsx)(o.k.Body,{variant:"dark",children:(0,a.jsx)(k,{pool:U,loading:Y.isFetching,calculation:Y.data})})]}):null,(0,a.jsx)(o.k.BodyTitle,{variant:"dark",children:G("STAKING.WITHDRAW_NET_AMOUNT_RECEIVABLE")}),(0,a.jsxs)(o.k.Body,{variant:"dark",children:[(0,a.jsx)("div",{className:"pt-5",children:(0,a.jsx)(h.t,{pool:U,userPoolInfo:ee.data,action:"withdraw",loading:Y.isFetching,calculation:Y.data})}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[er?(0,a.jsx)(g.X,{label:G("STAKING.EARLY_WITHDRAW_PENALTY__CHARGE"),labelClassName:"text-[#FB5656]",valueClassName:"text-[#FB5656]",value:"".concat(G("intlNumber",{value:ea.penalty})," ").concat(U.depositTokenSymbol)}):null,(0,a.jsx)(g.X,{label:G("STAKING.WITHDRAW_NET_AMOUNT_RECEIVABLE"),labelClassName:"text-sm font-semibold text-[#FFFFFF]",valueClassName:"text-lg font-semibold text-[#FFFFFF]",value:"".concat(G("intlNumber",{value:ea.netReceivable})," ").concat(U.depositTokenSymbol)})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-4 px-8",children:[(0,a.jsx)(x.z,{onClick:()=>$(!1),disabled:H.contract.isLoading,style:"outline",children:G("STAKING.CANCEL")}),(0,a.jsx)(x.z,{type:"submit",loading:H.contract.isLoading||H.prepare.isLoading||z.formState.isSubmitting,disabled:H.contract.isLoading||H.prepare.isFetching||z.formState.isSubmitting||!z.formState.isValid,children:G("STAKING.WITHDRAW")})]})]})})})}},53445:function(e,t,n){n.d(t,{Z:function(){return N}});var a=n(52322),r=n(85737),s=n(14013),i=n(75010),o=n(2784),d=n(98614),l=n(96501),c=n(62794),u=n(31721),m=n(19819),p=n(32273),y=n(53972),x=n(22919),f=n(77555),h=n(50068),A=n(27481);function T(e){var t,n;let{pool:r,onOpenModal:s}=e,{t:i}=(0,d.$G)("common"),T=(0,h.mA)(),{data:b}=(0,l.N)(),N=(0,c.ni)({poolContractAddress:r.stakingContractAddress,walletAddress:T.address,chainId:r.chainId,query:{enabled:T.isConnected,keepPreviousData:!0}}),g=(0,o.useMemo)(()=>Number.isFinite(Number(r.averageAPR))?"".concat(null==r?void 0:r.averageAPR,"%"):"-",[r]);return(0,a.jsx)("div",{className:"rounded-main flex flex-col gap-6 bg-[#141314] px-4 py-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)(u.u,{pool:r}),(0,a.jsx)(p.k,{id:r.stakingContractAddress,inline:!0,date:(0,A.NZ)(parseInt((null===(t=N.data)||void 0===t?void 0:t.unlockDate)||"0")),timestamp:b.timestamp}),(0,a.jsx)("div",{className:"col-span-2 h-6"}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)(y.ZP,{className:"text-sm font-semibold text-[#F7F8F8]",children:i("STAKING.TVL")}),(0,a.jsxs)(y.ZP,{className:"text-sm text-[#B4BCD0]",children:["$",i("currency",{value:r.totalValueLockedUSD})]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[(0,a.jsx)(y.ZP,{className:"text-xs font-semibold text-[#F7F8F8]",children:i("STAKING.CLAIMABLE")}),(0,a.jsx)(f.T,{pool:r,userPoolInfo:N.data})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)(y.ZP,{className:"text-xs font-semibold text-[#F7F8F8]",children:i("STAKING.TABLE_CELL_AVG_APR")}),(0,a.jsx)(y.ZP,{className:"text-xs text-[#B4BCD0]",children:g})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[(0,a.jsx)(y.ZP,{className:"text-xs font-semibold text-[#F7F8F8]",children:i("STAKING.STAKED")}),(0,a.jsx)(x.U,{pool:r,userPoolInfo:N.data})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,a.jsx)(y.ZP,{className:"text-xs font-semibold text-[#F7F8F8]",children:i("STAKING.TABLE_CELL_MY_APR")}),(0,a.jsxs)(y.ZP,{className:"text-xs text-[#B4BCD0]",children:[parseFloat((null===(n=N.data)||void 0===n?void 0:n.apr)||"0").toFixed(2),"%"]})]}),(0,a.jsx)("div",{className:"col-span-2 h-6"}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(m.R,{pool:r,userPoolInfo:N.data,onOpenModal:(e,t)=>{s(e,t),N.refetch()}})})]})})}function b(e){let{pools:t,onOpenModal:n}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 gap-8 ngmd:grid-cols-2",children:t.map(e=>(0,a.jsx)(T,{pool:e,onOpenModal:n},e.id))})}function N(e){var t;let{onOpenModal:n,tokenSymbol:o}=e,d=!(0,s.d)(1279),l=(0,c.hQ)({query:{keepPreviousData:!1}},o);return l.isLoading||l.isInitialLoading||!l.isFetched?(0,a.jsx)(r.a,{}):(null===(t=l.data)||void 0===t?void 0:t.length)===0&&l.isSuccess?(0,a.jsx)("div",{children:"empty list"}):d?(0,a.jsx)(i.z,{pools:l.data||[],onOpenModal:n}):(0,a.jsx)(b,{pools:l.data||[],onOpenModal:n})}},68378:function(e,t,n){n.d(t,{hF:function(){return c},Z7:function(){return l},gM:function(){return p},yG:function(){return f},yA:function(){return x},z7:function(){return y},Qo:function(){return u},mM:function(){return h},Qc:function(){return m}});var a=n(50068),r=JSON.parse('[{"inputs":[{"internalType":"address","name":"target","type":"address"}],"name":"AddressEmptyCode","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"AddressInsufficientBalance","type":"error"},{"inputs":[],"name":"AlreadyInitialized","type":"error"},{"inputs":[],"name":"AlreadyInitializedOwner","type":"error"},{"inputs":[],"name":"CallerIsNotOwner","type":"error"},{"inputs":[],"name":"DepositTokenRecoveryNotAllowed","type":"error"},{"inputs":[],"name":"DepositsDisabled","type":"error"},{"inputs":[{"internalType":"uint256","name":"fee","type":"uint256"},{"internalType":"uint256","name":"maxFee","type":"uint256"}],"name":"ExceedsMaxEarlyUnlockFeePerDay","type":"error"},{"inputs":[{"internalType":"uint256","name":"period","type":"uint256"},{"internalType":"uint256","name":"maxPeriod","type":"uint256"}],"name":"ExceedsMaxLockingPeriod","type":"error"},{"inputs":[],"name":"FailedInnerCall","type":"error"},{"inputs":[],"name":"MissingAmount","type":"error"},{"inputs":[],"name":"MissingDepositToken","type":"error"},{"inputs":[],"name":"MissingOwner","type":"error"},{"inputs":[],"name":"MissingRewardsAPI","type":"error"},{"inputs":[],"name":"MissingToken","type":"error"},{"inputs":[],"name":"MissingZapperContract","type":"error"},{"inputs":[],"name":"ReentrancyGuardReentrantCall","type":"error"},{"inputs":[{"internalType":"uint256","name":"requestedUnlockDate","type":"uint256"},{"internalType":"uint256","name":"currentUnlockDate","type":"uint256"}],"name":"RequestedUnlockDateBeforeCurrent","type":"error"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"name":"SafeERC20FailedOperation","type":"error"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"zapper","type":"address"}],"name":"SenderIsNotZapper","type":"error"},{"inputs":[{"internalType":"uint256","name":"requestedWithdrawal","type":"uint256"},{"internalType":"uint256","name":"currentBalance","type":"uint256"}],"name":"WithdrawalRequestExceedsDeposited","type":"error"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"claimed","type":"uint256"}],"name":"Claimed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"newInstance","type":"address"}],"name":"Cloned","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"admin","type":"address"},{"indexed":false,"internalType":"uint256","name":"fees","type":"uint256"}],"name":"CollectedFees","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"lockingPeriod","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"fee","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"secondsUntilUnlock","type":"uint256"}],"name":"PaidEarlyUnlockFee","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"admin","type":"address"},{"indexed":false,"internalType":"bool","name":"depositsEnabled","type":"bool"}],"name":"SetDepositsEnabled","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"admin","type":"address"},{"indexed":false,"internalType":"uint256","name":"earlyUnlockFeePerDay","type":"uint256"}],"name":"SetEarlyUnlockFeePerDay","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"admin","type":"address"},{"indexed":false,"internalType":"address","name":"zapperContract","type":"address"}],"name":"SetZapperContract","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Withdraw","type":"event"},{"inputs":[],"name":"MAX_EARLY_UNLOCK_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_EARLY_UNLOCK_FEE_PER_DAY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_LOCKING_PERIOD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_PERCENTAGE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"claim","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"clone","outputs":[{"internalType":"address","name":"newInstance","type":"address"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"collectFees","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_lockingPeriod","type":"uint256"}],"name":"deposit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_recipient","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_lockingPeriod","type":"uint256"}],"name":"depositFor","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"depositToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"depositsEnabled","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"earlyUnlockFeePerDay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"earlyUnlockFees","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getClone","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_depositToken","type":"address"},{"internalType":"address","name":"_rewardsAPI","type":"address"}],"name":"initialize","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"pending","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"pendingFor","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"to","type":"address"}],"name":"recoverUnsupportedTokens","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"rewardToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardsAPI","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bool","name":"_depositsEnabled","type":"bool"}],"name":"setDepositsEnabled","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_earlyUnlockFeePerDay","type":"uint256"}],"name":"setEarlyUnlockFeePerDay","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"initialOwner","type":"address"}],"name":"setOwnerAfterClone","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_zapperContract","type":"address"}],"name":"setZapperContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalScore","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"userInfo","outputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"lockDate","type":"uint256"},{"internalType":"uint256","name":"unlockDate","type":"uint256"},{"internalType":"uint256","name":"score","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"withdrawAndClaim","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"zapperContract","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]'),s=n(2784),i=n(10528),o=n(37710),d=n(94225);let l=30,c=90,u=e=>{let{contractAddress:t,tokenAmount:n,lockedPeriod:s,enabled:i=!0}=e,[o]=(0,d.Nr)(n,750),[l]=(0,d.Nr)(s,750),[c]=(0,d.Nr)(i,750),u=(0,a.PJ)({address:t,abi:r,functionName:"deposit",args:[o,l],enabled:c}),m=(0,a.GG)(u.config);return{prepare:u,contract:m}},m=e=>{let{contractAddress:t,tokenAmount:n,enabled:s=!0}=e,i=(0,a.PJ)({address:t,abi:r,functionName:"withdrawAndClaim",args:[n],enabled:s}),o=(0,a.GG)(i.config);return{prepare:i,contract:o}},p=e=>{let{contractAddress:t,address:n,enabled:s=!0}=e;return(0,a.do)({address:t,abi:r,functionName:"userInfo",args:[n],enabled:s})},y=e=>{let{contractAddress:t,enabled:n=!0}=e,s=(0,a.PJ)({address:t,abi:r,functionName:"claim",args:[],enabled:n}),i=(0,a.GG)(s.config);return{prepare:s,contract:i}},x=e=>{let{tokenAddress:t,address:n,tokenAmount:r,enabled:s=!0}=e,[i]=(0,d.Nr)(n,1e3),[l]=(0,d.Nr)(r,1e3),[c]=(0,d.Nr)(s,1e3),u=(0,a.PJ)({address:t,abi:o.Mt,functionName:"approve",args:[i,l],enabled:c}),m=(0,a.GG)(u.config);return{prepare:u,contract:m}},f=e=>{let{tokenAddress:t,addressOwner:n,addressSpender:r,enabled:s=!0}=e,[i]=(0,d.Nr)(n,500),[l]=(0,d.Nr)(r,500),[c]=(0,d.Nr)(s,500);return(0,a.do)({address:t,abi:o.Mt,functionName:"allowance",args:[i,l],cacheTime:3e4,enabled:c})},h=e=>{let{address:t,addressToken:n,chainId:r,enabled:o}=e,d=(0,a.KQ)({address:t,token:n,chainId:parseInt(String(r),10),enabled:o}),l=(0,s.useMemo)(()=>d.isSuccess?i.O$.from(d.data.value):i.O$.from(0),[d.data]);return{data:l,isLoading:d.isLoading}}},52702:function(e,t,n){n.d(t,{Ac:function(){return d},o2:function(){return l},vk:function(){return o}});var a=n(48601),r=n(30408);a.kM(a.Z_,"bnMax",function(e,t,n){return this.test(function(a){let{path:s,createError:i}=this;try{let o=(0,r.v)(a,t),d=(0,r.v)(e,t);if(o.lte(d))return!0;return i({path:s,message:n,params:{max:e}})}catch(e){return i({path:s,message:"${label} invalid value"})}})}),a.kM(a.Z_,"bnMin",function(e,t,n){return this.test(function(a){let{path:s,createError:i}=this;try{let o=(0,r.v)(a,t),d=(0,r.v)(e,t);if(o.gte(d))return!0;return i({path:s,message:n,params:{min:e}})}catch(e){return i({path:s,message:"${label} invalid value"})}})});let s=a.Z_().matches(/^[0-9.]+$/,"Must be only digits"),i=a.Rx().transform(e=>isNaN(e)?void 0:e).positive().integer();function o(e){let{tokenAmount:t,lockedPeriod:n}=e,r=s.label(t.label).bnMin(t.min,t.decimals,"${label} must be greater than ${min}").bnMax(t.max,t.decimals,"Insufficient balance"),o=i.label(n.label).min(n.min).max(n.max);return a.Ry({tokenAmount:t.required?r.required():r.notRequired(),lockedPeriod:n.required?o.required():o.notRequired()})}function d(e){let{lockedPeriod:t}=e,n=i.label(t.label).min(t.min).max(t.max);return a.Ry({lockedPeriod:t.required?n.required():n})}function l(e){let{tokenAmount:t}=e,n=s.label(t.label).bnMax(t.max,t.decimals,"Insufficient balance").bnMin(t.min,t.decimals,"${label} must be greater than ${min}");return a.Ry({tokenAmount:t.required?n.required():n})}},42710:function(e,t,n){n.d(t,{_:function(){return a}});let a=e=>new Promise(t=>setTimeout(t,e))},49641:function(e,t,n){n.d(t,{M:function(){return c}});var a=n(96558),r=n(42710);let s=e=>1e3*~~(1<<e),i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,a=0;for(;a<t;)try{return await e()}catch(e){if(++a>=t)throw e;await (0,r._)("function"==typeof n?n(a):n)}throw Error("Unexpected error in retryAsync function")};var o=n(13966),d=n(38030),l=n(22142);let c=async e=>{let{connectorId:t,...n}=e;return t===l.jK.SAFE_WALLET?m(n):u(n)},u=async e=>{let{retries:t,retryDelayMs:n,sleepMs:s=o.b,timeout:d=o.b,...l}=e;return await (0,r._)(s),i(()=>(0,a.Mn)({...l,timeout:d}),t,n)},m=async e=>{let{hash:t}=e,n=new d.ZP;for(;;){let a=await n.txs.getBySafeTxHash(t);if(a.txStatus===d.LN.AWAITING_CONFIRMATIONS||a.txStatus===d.LN.AWAITING_EXECUTION){await (0,r._)(o.b);continue}if(a.txStatus===d.LN.CANCELLED)throw Error("Transaction canceled");if(a.txStatus===d.LN.FAILED)throw Error("Transaction failed");if(a.txStatus===d.LN.SUCCESS&&a.txHash)return u({...e,hash:a.txHash});throw Error("waitForTransactionSafeWallet unhandled error")}}},37337:function(e,t,n){n.d(t,{G:function(){return s}});var a=n(52322),r=n(78246);function s(e){let{options:t,value:n,onChange:s,style:i="light",size:o}=e,d="light"===i?"neutral":"outline-dark",l="light"===i?"outline":"neutral-dark";return(0,a.jsx)("div",{className:"flex flex-row gap-4",children:t.map(e=>(0,a.jsx)(r.z,{size:o,style:n===e.value?d:l,onClick:()=>s(e.value),children:e.label},e.value+e.label))})}},85737:function(e,t,n){n.d(t,{a:function(){return i}});var a=n(52322),r=n(61335);let s=(0,r.j)("relative inline-block animate-spin rounded-full border-4 border-solid border-current border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]",{variants:{size:{small:["h-4","w-4"],medium:["h-12","w-12"],large:["h-16","w-16"]}},defaultVariants:{size:"medium"}});function i(e){let{size:t}=e;return(0,a.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,a.jsx)("div",{className:s({size:t}),role:"status"})})}}}]);