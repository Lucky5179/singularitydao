"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7186],{80662:function(e,t,i){i.r(t);var l=i(52322),a=i(2784),n=i(38884),o=i(77151),s=i(81927),r=i(50592),c=i(28589),d=i(72463);t.default=e=>{let{modalOpen:t,setModalOpen:i,title:u,itemsList:v=[],resultsList:E=[],primaryAction:m,secondaryAction:y,itemTitle:S="",resultTitle:R=""}=e,[h,p]=(0,r.hQ)(),[A,x]=(0,a.useState)({}),[b,f]=(0,a.useState)({}),g=(0,a.useCallback)(()=>{i(!1)},[]),w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i={};e.forEach((e,t)=>{i={...i,["".concat(t)]:e}}),"item"===t&&x(i),"result"===t&&f(i)};return(0,a.useEffect)(()=>{w(v,"item"),w(E,"result")},[v,E]),(0,l.jsx)(n.u_,{onClose:g,isOpen:t,animate:!0,closeable:!0,title:(0,l.jsx)(d.r,{title:u,handleModalClose:g}),primaryAction:{title:m.title,onClick:m.onClick},secondaryAction:y&&(0,l.jsx)(c.x,{variant:"default",variantStyle:"secondary",size:"small",onClick:y.onClick,children:"Close"}),content:(0,l.jsxs)(l.Fragment,{children:[v&&v.length>0&&(0,l.jsxs)(l.Fragment,{children:[S&&(0,l.jsx)(s.aM,{color:p.colors.white,children:S}),(0,l.jsx)(o.Z,{listOptions:A})]}),E&&E.length>0&&(0,l.jsxs)(l.Fragment,{children:[R&&(0,l.jsx)(s.aM,{color:p.colors.white,children:R}),(0,l.jsx)(o.Z,{listOptions:b})]})]})})}},7186:function(e,t,i){i.r(t),i.d(t,{default:function(){return K}});var l=i(52322),a=i(2784),n=i(30171),o=i(72558),s=i(50592),r=i(5632),c=i(98614),d=i(23917),u=i(67205),v=i(17129),E=i(75926),m=i(6687),y=i(9997),S=i(37179),R=i(84057),h=i(83520),p=i(33649),A=i(41148),x=i(12769),b=i(82578),f=i(24636),g=i(87918),w=i(72149),_=i(32475),C=i(45420),L=i(77151),O=i(94006),k=i(98197),N=i(48756),T=i(26074),j=i(89170),B=e=>{let{name:t,disabled:i,value:a,handleOnChange:n,balance:o,token:r}=e,{t:d}=(0,c.$G)("common"),[u,v]=(0,s.hQ)();return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-white text-sm pb-2",children:t}),(0,l.jsx)(N.II,{value:a,type:"number",onChange:e=>{var t;return n(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value)},disabled:i,placeholder:"Please enter",endEnhancer:()=>(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(j.qc,{theme:v,children:r}),(0,l.jsx)(j.Ac,{children:(0,l.jsx)(T.T,{token:r})})]}),overrides:{Root:{style:e=>{let{$theme:t}=e;return{paddingRight:"0px",borderColor:t.colors.white,borderRadius:t.borders.radius300}}},Input:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundPrimary,color:v.colors.white}}},EndEnhancer:{style:e=>{let{$theme:t}=e;return{cursor:"pointer",backgroundColor:t.colors.backgroundPrimary,fontWeight:t.typography.font150.fontWeight,fontSize:v.sizing.scale600,letterSpacing:"0.2px",color:v.colors.contentTertiary}}}}}),(0,l.jsxs)("div",{className:"text-white text-sm pt-2",children:[d("BALANCE"),":",(0,l.jsx)("span",{className:" text-primary pointer",onClick:()=>n(o),children:o})]})]})},P=i(92678),I=i(28857),U=i(80662),D=i(28589),M=i(92557),G=i(9906),F=i(88748),K=e=>{var t,i;let{tokens:u}=e,w=(0,G.pm)(),{t:L}=(0,c.$G)("common"),N=(0,r.useRouter)(),T=(0,v.C)(_.H),j=(0,v.C)(E.M),{slippage:P}=j,[,I]=(0,s.hQ)(),{library:F,account:K,chainId:q}=(0,m.aF)(),[V,Y]=(0,a.useState)(),[Q,W]=(0,a.useState)(),[H,z]=(0,a.useState)(!1),[$,J]=(0,a.useState)(!1),[X,ee]=(0,a.useState)("0"),[et,ei]=(0,a.useState)("0"),[el,ea]=(0,a.useState)("0"),[en,eo]=(0,a.useState)("0"),[es,er]=(0,a.useState)(!1),[ec,ed]=(0,a.useState)(""),[eu,ev]=(0,a.useMemo)(()=>q&&x.A[q]?[0,1].map(e=>x.A[q][(0,g.Q4)(u[e])]):[0,1].map(e=>x.A[T][(0,g.Q4)(u[e])]),[u,q,T]),[eE,em]=(0,a.useState)({liquidityReceived:void 0,tokenABalanceDelta:void 0,tokenBBalanceDelta:void 0}),{loading:ey,data:eS}=(0,h.OJ)(null!=eu?eu:""),{loading:eR,data:eh}=(0,h.OJ)(null!=ev?ev:""),{data:ep}=(0,C.U)(eu,ev),{data:eA}=(0,k.i)(eu,ev),{data:ex={}}=(0,d.a)(O.l,{variables:{id:null==ep?void 0:null===(t=ep.address)||void 0===t?void 0:t.toLowerCase()}}),eb=null==eA?void 0:eA.swappingRoute,ef=async(e,t)=>{try{if(e){let i=await (null==e?void 0:e.getBalance(K)),l=(0,p.UL)(i.toString(),e.decimals,t);return l}return"0"}catch(e){return w({title:L("ERROR_MESSAGES.ERROR"),description:L("ERROR_MESSAGES.UNABLE_TO_FETCH_LATEST_BALANCE"),type:"error"}),"0"}},eg=()=>{ew(null==eS?void 0:eS.symbol),ew(null==eh?void 0:eh.symbol)},ew=async e=>{if(eS&&eh&&q&&K)try{let t=e===eS.symbol?eS.contract:eh.contract,i=await t.allowance(K,x.A[q].ROUTER_V2),l=e===eS.symbol?ee:ei;l(i.toString())}catch(e){ee("0"),ei("0"),w({title:L("ERROR_MESSAGES.ERROR"),description:L("ERROR_MESSAGES.UPDATE_USER_TOKEN_BALANCE"),type:"error"})}},e_=async e=>{try{let t=null==eA?void 0:eA.conversionRate;if(!(0,R.K)(e)){W(""),Y(e);return}if("."===(0,R.K)(e))return Y("0.");if("."==="".concat((0,R.K)(e)).charAt(0)&&(e="0".concat(e)),Y(e),W("Calculating ..."),!t)return W("0");let i=e*t;W(i.toString())}catch(e){Y("0"),W("0")}},eC=async e=>{try{let t=null==eA?void 0:eA.invertedConversionRate;if(!(0,R.K)(e)){Y("0"),W(e);return}if("."===(0,R.K)(e))return W("0.");if("."==="".concat((0,R.K)(e)).charAt(0)&&(e="0".concat(e)),W(e),Y("Calculating ..."),!t)return Y("0");let i=e*t;Y(i.toString())}catch(e){Y("0"),W("0")}},eL=()=>{Y("0"),W("0")},eO=async e=>{try{let t;if(J(!0),!K||!q||!eS||!eh)return;let i=e===eS.symbol?eS.contract:eh.contract,l=e===eS.symbol?eS.decimals:eh.decimals,a=e===eS.symbol?X:et,n=new o.Z(a).comparedTo((0,p.jE)(Q,l))===p.Ym.LESSER;"USDT"===e&&!(0,p.Fr)(a)&&n?(t=await i.approve(x.A[q].ROUTER_V2,"0"),await t.wait(),t=await i.approve(x.A[q].ROUTER_V2,y.AN),await t.wait()):t=await i.approve(x.A[q].ROUTER_V2,y.AN),await t.wait(),await ew(e),w({title:L("ERROR_MESSAGES.APPROVED_SUCCESSFULLY"),description:"".concat(t.hash),hash:t.hash,type:"success"})}catch(e){w({title:L("ERROR_MESSAGES.APPROVAL_FAILED"),description:"".concat(e.message),type:"error"})}finally{J(void 0)}},ek=async()=>{try{var e,t,i;let l,a,s,r;if(!K||!q||!eS||!eh)return;let c=await eN(null===(e=null==eb?void 0:eb.pairs[0])||void 0===e?void 0:e.liquidityToken.address),d=await eS.getBalance(),u=await eh.getBalance(),v=(0,p.jE)(V,eS.decimals,0),E=(0,p.jE)(Q,eh.decimals,0),m=new o.Z(v).comparedTo(new o.Z(d.toString()))===p.Ym.GREATER,R=new o.Z(E).comparedTo(new o.Z(u.toString()))===p.Ym.GREATER;(m||R)&&w({title:L("ERROR_MESSAGES.INSUFFICIENT_BALANCE"),description:"".concat(L("ERROR_MESSAGES.INSUFFICIENT")," ").concat(m?eS.symbol:eh.symbol," ").concat(L("ERROR_MESSAGES.BALANCE"),"! ").concat(L("ERROR_MESSAGES.PLEASE_ENTER_A_LESSER_AMOUNT")),type:"error"});let h=await F.getSigner(K),A=new n.CH(x.A[q].ROUTER_V2,S.Mt,h),b=Math.floor(Date.now()/1e3)+1200,g=eS.isEth||eh.isEth;if(g){l="addLiquidityETH",a=[eS.address,v,new o.Z(v).multipliedBy(100-P).dividedBy(100).toFixed(0),new o.Z(E).multipliedBy(100-P).dividedBy(100).toFixed(0),K,b];let e=(0,p.jE)(Q,18,0),t=await A.estimateGas[l](...a,{value:e}),i=await h.getGasPrice();s=await A[l](...a,{gasLimit:t,maxFeePerGas:i,value:E})}else l="addLiquidity",a=[eS.address,eh.address,v,E,new o.Z(v).multipliedBy(100-P).dividedBy(100).toFixed(0),new o.Z(E).multipliedBy(100-P).dividedBy(100).toFixed(0),K,b],s=await (0,y.F4)(A,l,await h.getGasPrice(),...a);let _=await s.wait(),C=await eN(null===(t=null==eb?void 0:eb.pairs[0])||void 0===t?void 0:t.liquidityToken.address),O=C.sub(c);O=(0,p.UL)(O.toString(),null===(i=null==eb?void 0:eb.pairs[0])||void 0===i?void 0:i.liquidityToken.decimals);let k=await eS.getBalance(),N=await eh.getBalance(),T=d.sub(k);T=(0,p.UL)(T.toString(),eS.decimals),eh.isEth||(r=u.sub(N),r=(0,p.UL)(r.toString(),eh.decimals)),em({liquidityReceived:O,tokenABalanceDelta:T,tokenBBalanceDelta:eh.isEth?Q:r}),(0,f.F)(K,"".concat(O),"","",""),w({title:L("ERROR_MESSAGES.ADDED_LIQUIDITY_SUCCESSFULLY"),hash:_.transactionHash,type:"success"})}catch(e){throw w({title:L("ERROR_MESSAGES.ERROR"),description:L("ERROR_MESSAGES.UNABLE_TO_ADD_LIQUIDITY"),type:"error"}),e}},eN=async e=>{try{let t=new n.CH(e,A.Mt,F),i=await t.callStatic.balanceOf(K);return i}catch(e){return 0}},eT=async()=>{try{z(!0),await ek(),er(!0)}catch(e){if(e instanceof b.B9){w({title:L("ERROR_MESSAGES.ERROR"),description:e.message,type:"error"});return}}finally{z(!1)}},ej=(e,t)=>{if(!e||!eS||!eh)return!1;let i=e===eS.symbol?eS:eh;if(i.isEth)return!1;let l=(0,R.K)(t);if(!l||isNaN(Number(l)))return!1;let a=e===eS.symbol?X:et;if((a=new o.Z(a)).isZero())return!0;let n=(0,p.jE)(t,null==i?void 0:i.decimals);return a.comparedTo(new o.Z(n))===p.Ym.LESSER},eB=()=>{eL(),er(!1)};return(0,a.useEffect)(()=>{Y(""),W("")},[u]),(0,M.Y)(()=>eg(),y.OO,[K,ey,eR]),(0,a.useEffect)(()=>{(async()=>{ey||ea(await ef(eS,1/0))})()},[ey]),(0,a.useEffect)(()=>{(async()=>{ey||eo(await ef(eh,1/0))})()},[eR]),(0,a.useEffect)(()=>{var e,t;ed(null!==(t=(0,p.dq)(null==ex?void 0:null===(e=ex.pair)||void 0===e?void 0:e.reserveUSD,2,!0))&&void 0!==t?t:"...")},[null==ep?void 0:ep.address,null==ex?void 0:null===(i=ex.pair)||void 0===i?void 0:i.reserveUSD]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center pb-4 pt-4",children:[(0,l.jsx)(B,{name:"Pool 1",disabled:!eb||!(null==eA?void 0:eA.conversionRate),value:V,handleOnChange:e_,balance:el,token:u[0]}),(0,l.jsx)("div",{className:"px-4 text-white",children:"+"}),(0,l.jsx)(B,{name:"Pool 2",disabled:!eb||!(null==eA?void 0:eA.conversionRate),value:Q,handleOnChange:eC,balance:en,token:u[1]})]}),(0,l.jsx)(Z,{tokens:u,pairData:ep,totalLiquidityValue:ec,conversionData:eA}),(0,l.jsx)("div",{className:"text-sm text-green-25",children:L("BY_ADDING_LIQUIDITY_YOU_WILL_EARN")}),(0,l.jsxs)("div",{className:"text-sm text-grey-100",children:[L("LP_TOKENS_YOU_RECEIVE")," ",(0,l.jsx)("span",{className:"pointer text-blue-300 underline",onClick:()=>N.push({pathname:"/vaults"}),children:L("VAULTS")}),"\xa0 ",L("SECTON")," ."]}),(0,l.jsxs)("div",{className:"flex flex-col justify-evenly",children:[(0,l.jsxs)("div",{className:"mb-3 flex justify-evenly",children:[ej(null==eS?void 0:eS.symbol,V)&&(0,l.jsxs)(D.x,{variant:"default",size:"medium",variantStyle:"primary",onClick:()=>eO(eS.symbol),disabled:H||$||0>=Number(V),loading:(null==eS?void 0:eS.symbol)&&$===eS.symbol,children:[L("APPROVE")," ",null==eS?void 0:eS.symbol]}),ej(null==eh?void 0:eh.symbol,Q)&&(0,l.jsxs)(D.x,{variant:"default",size:"medium",variantStyle:"primary",onClick:()=>eO(eh.symbol),disabled:$,loading:(null==eh?void 0:eh.symbol)&&$===eh.symbol,children:[L("APPROVE")," ",null==eh?void 0:eh.symbol]})]}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(D.x,{variant:"default",size:"medium",variantStyle:"primary",onClick:eT,disabled:!Q||0>=Number(Q)||H||$||ej(eS.symbol,V)||ej(null==eh?void 0:eh.symbol,Q)||ey,loading:H,children:L("ADD_LIQUIDITY")})})]}),es&&(0,l.jsx)(U.default,{modalOpen:es,setModalOpen:eB,title:"Liquidity added successfully!",itemTitle:"Liquidity Added:",itemsList:[{key:null==eS?void 0:eS.symbol,value:"".concat(eE.tokenABalanceDelta," ").concat(null==eS?void 0:eS.symbol),token:null==eS?void 0:eS.symbol,cssLabel:{color:I.colors.white}},{key:null==eh?void 0:eh.symbol,value:"".concat(eE.tokenBBalanceDelta," ").concat(null==eh?void 0:eh.symbol),token:null==eh?void 0:eh.symbol,cssLabel:{color:I.colors.white}}],resultTitle:"LP Recieved:",resultsList:[{key:"LP Received",value:"".concat(eE.liquidityReceived),tokens:[null==eS?void 0:eS.symbol,null==eh?void 0:eh.symbol],cssLabel:{color:I.colors.white}}],primaryAction:{title:"Ok",onClick:eB}})]})};function Z(e){var t,i,a,n,o,r;let{t:d}=(0,c.$G)("common"),{chainId:E}=(0,m.aF)(),[,y]=(0,s.hQ)(),S=(0,v.C)(_.H),{tokens:R,totalLiquidityValue:h,pairData:p,conversionData:A}=e,x={price:{key:"Price",label:d("PRICE"),value:"".concat((null==A?void 0:A.conversionRate)?1*(null==A?void 0:A.conversionRate):"..."," ").concat(R&&R[1]," per ").concat(R&&R[0])},inverseprice:{key:"Inverse Price",label:d("INVERSE_PRICE"),value:"".concat((null==A?void 0:A.invertedConversionRate)?1*(null==A?void 0:A.invertedConversionRate):"..."," ").concat(R&&R[0]," per ").concat(R&&R[1])},tokenALocked:{key:"Total Tokens Locked ".concat(R[0]),label:"".concat(d("TOTAL_TOKENS_LOCKED")," ").concat(R[0]),value:R[0]===(null==p?void 0:null===(t=p.reserveA)||void 0===t?void 0:t.symbol)?null==p?void 0:null===(i=p.reserveA)||void 0===i?void 0:i.display:null==p?void 0:null===(a=p.reserveB)||void 0===a?void 0:a.display,css:{color:y.colors.positive}},tokenBLocked:{key:"Total Tokens Locked ".concat(R[1]),label:"".concat(d("TOTAL_TOKENS_LOCKED")," ").concat(R[1]),value:R[1]===(null==p?void 0:null===(n=p.reserveB)||void 0===n?void 0:n.symbol)?null==p?void 0:null===(o=p.reserveB)||void 0===o?void 0:o.display:null==p?void 0:null===(r=p.reserveA)||void 0===r?void 0:r.display,css:{color:y.colors.positive}},totalLiquidity:{key:"TVL",label:d("TVL"),value:"$".concat(h||0),tooltip:u.s.liquidity.tvl},dex:{key:"DEX",label:d("DEX"),value:E==F.e.id||S==F.e.id?q({name:w.Ad.PANCAKESWAP}):q({name:w.Ad.UNISWAP})}};return(0,l.jsx)(L.Z,{listOptions:x})}function q(e){let{name:t}=e;return(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{children:t===w.Ad.PANCAKESWAP?w.Ad.PANCAKESWAP:w.Ad.UNISWAP}),t===w.Ad.PANCAKESWAP?(0,l.jsx)(I.Z,{}):(0,l.jsx)(P.Z,{})]})}},82578:function(e,t,i){i.d(t,{B9:function(){return l},N2:function(){return a},g7:function(){return n}});class l extends Error{constructor(e="Insufficient Balance"){super(e),this.message=e,this.name="InsufficientBalanceError"}}class a extends Error{constructor(e="Staking Pool Expired"){super(e),this.message=e,this.name="StakingPoolExpiredError"}}class n extends Error{constructor(e="Exceeding Max Limits"){super(e),this.message=e,this.name="ExceedingMaxLimitsError"}}},84057:function(e,t,i){i.d(t,{K:function(){return l}});let l=e=>"".concat(e).replace(/[^0-9.]/g,"").split(".").slice(0,2).join(".")}}]);