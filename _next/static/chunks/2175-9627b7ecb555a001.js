"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2175],{94519:function(e,t,l){var o=l(52322),n=l(2784),r=l(48139),i=l(71911),s=l(50592);let a=n.forwardRef((e,t)=>{var l;let[n,a]=(0,s.hQ)();return(0,o.jsx)(i.a,{color:null!==(l=null==e?void 0:e.iconWrapperBackground)&&void 0!==l?l:"none",ref:t,...e,children:(0,o.jsx)("div",{className:"flex h-full w-full items-center justify-center ".concat(null==e?void 0:e.className),children:(0,o.jsx)(r.PJ,{icon:null==e?void 0:e.icon,iconWidth:(null==e?void 0:e.iconWidth)||"20px",iconHeight:(null==e?void 0:e.iconHeigth)||"20px",fillColor:(null==e?void 0:e.iconFillColor)||a.colors.white})})})});t.Z=a},71911:function(e,t,l){l.d(t,{a:function(){return s},m:function(){return a}});var o=l(67862),n=l(7307);function r(){let e=(0,o._)(["\n  background: ",";\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n"]);return r=function(){return e},e}function i(){let e=(0,o._)(["\n  .restIcons {\n    display: flex;\n    place-items: center;\n    margin-left: 5px;\n  }\n\n  .overlappedIcons {\n    width: 24px !important;\n    &:not(:last-of-type) {\n      margin-right: -10px;\n    }\n  }\n\n  .lastOverlappedIcons {\n    margin-right: 0px;\n  }\n"]);return i=function(){return e},e}let s=n.ZP.span(r(),e=>{let{color:t}=e;return t}),a=n.ZP.div(i())},79284:function(e,t,l){var o,n;l.d(t,{A:function(){return o}}),(n=o||(o={}))[n.DEPOSIT=0]="DEPOSIT",n[n.WITHDRAW=1]="WITHDRAW",n[n.REDEEM=2]="REDEEM",n[n.INSURE=3]="INSURE"},26074:function(e,t,l){l.d(t,{T:function(){return p}});var o=l(52322),n=l(2784),r=l(96577),i=l.n(r),s=l(67862),a=l(7307);function d(){let e=(0,s._)(["\n  img {\n    width: 28px;\n    height: 28px;\n  }\n"]);return d=function(){return e},e}function c(){let e=(0,s._)(["\n  img {\n    width: 18px !important;\n    height: 18px !important;\n  }\n"]);return c=function(){return e},e}let u=a.ZP.div(d()),m=a.ZP.div(c()),p=e=>{let{token:t,small:l}=e,r="ERP"===t?"NTX":t,[s,a]=(0,n.useState)();return(0,n.useEffect)(()=>{a((0,o.jsx)(i(),{alt:r,src:"/image/token/".concat(r,".svg"),height:l?18:28,width:l?18:28}))},[r]),l?(0,o.jsx)(m,{children:s}):(0,o.jsx)(u,{children:s})}},21674:function(e,t,l){var o,n;l.d(t,{N:function(){return o},l:function(){return r}}),(n=o||(o={})).ETH="ETH",n.SDAO="SDAO",n.AGIX="AGIX",n.USDT="USDT",n.NTX="NTX",n.WBTC="WBTC",n.BNB="BNB",n.BUSD="BUSD",n.WETH="WETH",n.USDC="USDC",n.DAI="DAI",n.DYNBTC="DYNBTC",n.DYNETH="DYNETH",n.MKR="MKR",n.WBNB="WBNB",n.RJV="RJV",n.HYPC="HYPC",n.CGV="CGV",n.SOPH="SOPH",n.RJVOLD="RJVOLD",n.SKYA="SKYA";let r={ETH:{name:"Ethereum",symbol:"ETH",decimals:18},SDAO:{name:"SingularityDAO",symbol:"SDAO",decimals:18},AGIX:{name:"SingularityNet",symbol:"AGIX",decimals:8},USDT:{name:"Tether",symbol:"USDT",decimals:6},NTX:{name:"NuNet",symbol:"NTX",decimals:18},WBTC:{name:"Wrapped Bitcoin",symbol:"WBTC",decimals:8},BNB:{name:"Binance Coin",symbol:"BNB",decimals:18},BUSD:{name:"BUSD Token",symbol:"BUSD",decimals:18},WETH:{name:"Wrapped Ethereum",symbol:"WETH",decimals:18},USDC:{name:"USD Coin",symbol:"USDC",decimals:6},DAI:{name:"Dai Stablecoin",symbol:"DAI",decimals:18},DYNBTC:{name:"wBTC DynaSet",symbol:"DYNBTC",decimals:18},DYNETH:{name:"wETH DynaSet",symbol:"DYNETH",decimals:18},ADA:{name:"",symbol:"ADA",decimals:6},CARDANO:{name:"",symbol:"ADA",decimals:6},RJV:{name:"Rejuve",symbol:"RJV",decimals:6},HYPC:{name:"Hypercycle",symbol:"HYPC",decimals:6},CGV:{name:"Cogito",symbol:"CGV",decimals:6},SOPH:{name:"SophiaVerse",symbol:"SOPH",decimals:18},SKYA:{name:"Sekuya",symbol:"SKYA",decimals:18},RJVOLD:{name:"Rejuve(OLD)",symbol:"RJVOLD",decimals:6}}},86295:function(e,t,l){l.d(t,{Z:function(){return ep}});var o=l(52322),n=l(21282),r=l(59348),i=l(2784),s=l(50592),a=l(81927),d=l(72463),c=l(72558),u=l(19384),m=l(26074),p=l(73686),h=l(30541);let x=(0,s.zo)("div",e=>({width:e.$theme.sizing.scale3200,display:"flex",alignItems:"center",...e.$theme.typography.font200,color:e.$theme.colors.white})),v=e=>{let{option:t}=e;return(0,o.jsxs)(x,{children:[(0,o.jsx)(h.Z,{marginRight:"5px",children:(0,o.jsx)(m.T,{token:t.value,small:!0})}),t.label]})},f=e=>{let{value:t,onChange:l,options:n,disabled:r=!1,noBorder:s=!1,hasLeftBorder:a=!1,size:d="small"}=e,c=!n||n.length>1,[u,m]=(0,i.useState)([]),h=(0,i.useMemo)(()=>null==n?void 0:n.map((e,t)=>({label:(null==e?void 0:e.label)?e.label:e,value:(null==e?void 0:e.value)?e.value:e,id:t})),[n]);return(0,i.useEffect)(()=>{if(h&&(null==h?void 0:h.length)){let e=(null==t?void 0:t.value)!==void 0?t.label:t,l=null==h?void 0:h.find(t=>e===(null==t?void 0:t.label));m(l?[l]:[])}},[t,h]),(0,o.jsx)("div",{className:"currency-dropdown--wrapper",children:(0,o.jsx)(p.Z,{searchable:!1,backspaceRemoves:!1,clearable:!1,labelKey:"id",valueKey:"id",options:h||[],onChange:e=>{l(e.value[0])},value:u,getOptionLabel:v,getValueLabel:v,disabled:r||!c,overrides:{Root:{style:e=>{let{$theme:t}=e;return{background:t.colors.backgroundPrimary,borderTopRightRadius:t.borders.radius300,borderBottomRightRadius:t.borders.radius300,borderBottomLeftRadius:a?t.borders.radius300:"0px !important",borderTopLeftRadius:a?t.borders.radius300:"0px !important",height:"42px",width:"small"===d?"125px":"175px",border:s?"none !important":"1px solid white",borderLeft:s?"1px solid white":"none !important"}}},Popover:{props:{overrides:{Body:{style:()=>({zIndex:"100"})}}}},ControlContainer:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundPrimary,borderTopRightRadius:t.borders.radius300,borderBottomRightRadius:t.borders.radius300,borderBottomLeftRadius:a?t.borders.radius300:"0px !important",borderTopLeftRadius:a?t.borders.radius300:"0px !important",border:s?"none !important":"1px solid white",borderLeft:a?"1px solid white":"none !important",height:"40px",borderSize:t.borders.borderWidth100,fontSize:t.typography.font200.fontSize}}},Dropdown:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundPrimary,overflow:"none !important"}}},SelectArrow:{props:{overrides:{Svg:{style:e=>{let{$theme:t}=e;return{fill:t.colors.white,display:(null==h?void 0:h.length)===1?"none":"block"}}}}}}}})})};var y=l(69578),g=l(14013);let b=e=>{let{dynasetSymbol:t,handleMaxClick:l}=e,[n,r]=(0,s.hQ)();return(0,o.jsxs)("div",{className:"flex items-center p-0",children:[(0,o.jsx)("div",{className:n({color:r.colors.accent200}),onClick:l,children:"MAX"}),(0,o.jsxs)("span",{className:"flex items-center py-3 ml-3 px-2",style:{color:r.colors.white,...r.typography.font200,width:"112px",borderLeft:"2px solid ".concat(r.colors.white)},children:[(0,o.jsx)("img",{className:"mr-2",src:"/image/icons/dynasets/".concat(t,".png"),height:"24px",width:"24px",loading:"lazy",alt:"".concat(t," icon")}),t]})]})};var w=l(9906),S=l(98614),E=l(18673),j=e=>{let{handleModalClose:t,dynaset:l,forgeV1:n,forgeV2:r,refreshForge:m}=e,p=(0,w.pm)(),{t:h}=(0,S.$G)("common"),[,x]=(0,s.hQ)(),v=(0,g.d)(),[j,R]=(0,i.useState)(!1),[N,k]=(0,i.useState)(""),[C,T]=(0,i.useState)(null),[A,O]=(0,i.useState)(new c.Z("0")),[B,D]=(0,i.useState)([]),[_,I]=(0,i.useState)(!1),L=_?n:r;(0,i.useEffect)(()=>{if(n||r){let e=(0,E.g)(null==n?void 0:n.tokens,null==r?void 0:r.tokens);D(e)}else D([]),O(new c.Z("0")),T(null)},[n,r]),(0,i.useEffect)(()=>{F(),m();let e=window.setInterval(()=>{F(),m()},6e4);return()=>{window.clearInterval(e)}},[]),(0,i.useEffect)(()=>{F()},[C]),(0,i.useEffect)(()=>{if(B.length>0&&!C){let e=B[0];T(e),I(e.label.includes("Q1 2023"))}},[B]);let F=()=>{if((n||r)&&C){var e,t,l,o;O(new c.Z(_?n&&(null===(e=n.tokens[C.value])||void 0===e?void 0:null===(t=e.userInfo)||void 0===t?void 0:t.dynasetsOwed)||"0":r&&(null===(l=r.tokens[C.value])||void 0===l?void 0:null===(o=l.userInfo)||void 0===o?void 0:o.dynasetsOwed)||"0"))}},P=async()=>{try{k(A.toString())}catch(e){k(N)}},M=async()=>{try{if(L){R(!0);let e=await L.tokens[C.value].withdrawLp(new c.Z(N).times(new c.Z(10).exponentiatedBy(18)).toFixed(0)),l=await e.wait();p({title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.dy,{symbol:127881})," ",h("SUCCESSFULLY_WITHDRAWN")]}),type:"success",hash:null==l?void 0:l.transactionHash}),R(!1),await m(),t({type:"success"})}}catch(t){var e;R(!1),p({title:h("ERROR_MESSAGES.WITHDRAW_FAILED"),description:"".concat(JSON.stringify(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:"")),type:"error"})}};return(0,o.jsxs)("div",{style:{width:v?y.Y:y.iR},children:[(0,o.jsx)(d.r,{title:"Withdraw LP",handleModalClose:t,showClose:!1}),(0,o.jsxs)("div",{className:"px-5 py-3",children:[(0,o.jsx)(a.lU,{color:x.colors.white,children:"Withdraw your DynaSet LP tokens from the forge to your wallet. This is optional, if you decide not to withdraw, you will be able to redeem directly from the forge using the 'From Forge' redeem function."}),(0,o.jsxs)("div",{className:"flex items-center justify-between pt-10",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(a.oW,{marginBottom:"4px",color:x.colors.white,children:"Select forge:"}),(0,o.jsx)(a.nN,{color:x.colors.white,children:(0,o.jsx)(f,{value:C,onChange:e=>{if(e){T({label:null==e?void 0:e.label,value:null==e?void 0:e.value});let t=e.label;I(t.includes("Q1 2023"))}},options:B,noBorder:!1,hasLeftBorder:!0,size:"large"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(a.oW,{marginBottom:"4px",color:x.colors.white,children:["Balance in forge:"," "]}),(0,o.jsxs)(a.nN,{color:x.colors.white,children:[A?A.toString():"0"," ",l]})]})]}),(0,o.jsxs)("div",{className:"input-wrapper my-10",children:[(0,o.jsx)(u.Z,{value:N,onChange:e=>{var t;let l=null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value;k(l)},onBlur:e=>{var t;let l=null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value,o=new c.Z(l);l&&o.isNaN()?k("0.0"):k(l)},endEnhancer:(0,o.jsx)(b,{dynasetSymbol:l,handleMaxClick:P}),placeholder:"Please enter",type:"number",overrides:{Root:{style:e=>{let{$theme:t}=e;return{paddingRight:"0px",borderColor:t.colors.white,borderRadius:t.borders.radius300}}},Input:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundPrimary,color:x.colors.white,fontSize:"14px"}}},EndEnhancer:{style:e=>{let{$theme:t}=e;return{cursor:"pointer",backgroundColor:t.colors.backgroundPrimary,fontWeight:t.typography.font150.fontWeight,fontSize:x.sizing.scale600,letterSpacing:"0.2px",color:x.colors.contentTertiary}}}}}),(0,o.jsxs)("div",{className:"pt-1 text-right",style:{color:x.colors.white,fontSize:x.sizing.scale500},children:["Balance:"," ",(0,o.jsxs)("span",{className:"cursor-point ml-1 text-primary",onClick:P,children:[A?A.toString():"0"," ",l]})]})]})]}),(0,o.jsx)(d.n,{primaryActionLabel:"Withdraw",primaryActionOnClick:M,isLoading:j,handleModalClose:t,disablePrimaryAction:!L||j})]})},R=l(48756),N=l(30282),k=e=>{let{handleModalClose:t}=e,[l,n]=(0,s.hQ)(),r=(0,g.d)();return(0,o.jsxs)("div",{style:{width:r?R.Y:R.iR,color:n.colors.white},children:[(0,o.jsx)(d.r,{title:"Insure your tokens",showClose:!1}),(0,o.jsxs)("div",{className:"px-5 py-3",children:[(0,o.jsx)(N.kd,{color:n.colors.white,children:"Keep Assets Secure"}),(0,o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,o.jsx)("img",{alt:"SDAO",src:"/logo/Singularity_dao_logo_filled.svg",height:120,width:180}),(0,o.jsx)("div",{className:"mx-5",children:"X"}),(0,o.jsx)("img",{alt:"Insurace",src:"/image/logos/insurance_logo.svg",height:120,width:180})]}),(0,o.jsx)(N.aM,{color:n.colors.white,children:"SingularityDAO, through insurance provider Insurace, offers reliable, robust and secure protection to DeFi users. Insure your tokens on the SingularityDAO protocol against any Smart Contract Vulnerability."}),(0,o.jsxs)(N.kd,{className:"mt-10",color:n.colors.white,children:["Coverage includes:"," "]}),(0,o.jsxs)(N.aM,{color:n.colors.white,children:["dynBTC & DynETH",(0,o.jsx)("br",{}),"Epoch Vaults",(0,o.jsx)("br",{}),"Unbonded Vaults",(0,o.jsx)("br",{}),"Yield Vaults"]})]}),(0,o.jsx)(d.n,{primaryActionLabel:"See offer",primaryActionOnClick:()=>window.open("https://app.insurace.io/coverage/cart?id=191&referrer=850821090698203874438968781032993270110401750883","_blank"),handleModalClose:t})]})},C=l(79284),T=l(15354),A=l(9258),O=l(21674);let B=(e,t)=>{let l=Number(e)*Number(t);return l.toFixed(3)};var D=l(11769),_=l(48139),I=l(28589),L=l(33649);let F=[{label:"0.1%",value:"0.1"},{label:"0.5%",value:"0.5"},{label:"1.0%",value:"1"}];var P=e=>{let{slippage:t,selectedToken:l,setSlippage:n,redeemAmount:r,capitalSlashSummary:d}=e,[,c]=(0,s.hQ)(),[u,p]=(0,i.useState)(!1);return(0,o.jsx)(o.Fragment,{children:r&&Number(r)>0&&l&&(0,o.jsxs)("div",{className:"mb-4 mt-2",children:[(0,o.jsx)(a.aM,{paddingBottom:c.sizing.scale200,color:c.colors.white,children:"Details:"}),d&&(0,o.jsxs)("div",{className:"mt-2",style:{borderBottom:"1px solid rgba(255,255,255,0.3)"},children:[(0,o.jsx)(a.lU,{color:c.colors.negative,children:"Due to this action being outside the redeem window, you will face an exit fee."}),(0,o.jsxs)("div",{className:"mt-2 flex items-center justify-between pb-1",children:[(0,o.jsxs)(a.lU,{color:c.colors.listBodyFill,children:["Exit fee (",null==d?void 0:d.capitalSlash,"%)"]}),(0,o.jsxs)(a.lU,{color:c.colors.white,children:[null==d?void 0:d.tokenAmountSlashed," (",(0,D._B)(null==d?void 0:d.approxUSD),")"]})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between pt-1",style:{borderBottom:"1px solid rgba(255,255,255,0.3)"},children:[(0,o.jsx)(a.lU,{color:c.colors.listBodyFill,children:"Expected Output"}),(0,o.jsx)(a.lU,{color:c.colors.white,children:(0,o.jsxs)("span",{className:"flex",children:[(0,o.jsxs)("span",{className:"mr-1",children:["(~$",(0,L.dq)(t.output.usdValue,4,!0),")",(0,o.jsx)("span",{className:"ml-3 font-bold",children:(0,L.dq)(t.output.amount,4,!0)})]}),(0,o.jsx)(m.T,{token:l,small:!0})]})})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between py-1",style:{borderBottom:"1px solid rgba(255,255,255,0.3)"},children:[(0,o.jsx)(a.lU,{color:c.colors.listBodyFill,children:"Slippage Tolerance"}),(0,o.jsxs)(a.lU,{color:c.colors.white,children:[t.slippage,"%"]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between pt-1",style:{borderBottom:"1px solid rgba(255,255,255,0.3)"},children:[(0,o.jsx)(a.lU,{color:c.colors.listBodyFill,children:"Minimum amount received"}),(0,o.jsx)(a.lU,{color:c.colors.white,children:(0,o.jsxs)("span",{className:"flex",children:[(0,o.jsxs)("span",{className:"mr-1",children:["(~$",(0,L.dq)(t.minimumAmount.usdValue,4,!0),")",(0,o.jsx)("span",{className:"ml-3 font-bold",children:(0,L.dq)(t.minimumAmount.amount,4,!0)})]}),(0,o.jsx)(m.T,{token:l,small:!0})]})})]}),(0,o.jsx)("div",{className:"mt-2 w-full",children:(0,o.jsx)(a.lU,{color:c.colors.white,$style:{display:"flex",justifyContent:"center"},children:(0,o.jsxs)("span",{className:"flex cursor-pointer items-center",onClick:()=>p(!u),children:[(0,o.jsx)("span",{className:"mr-2",children:"Advanced options "}),(0,o.jsx)(_.PJ,{icon:u?"expand_less":"expand_more",fillColor:c.colors.white})]})})}),u&&(0,o.jsxs)("div",{className:"my-2 flex items-center",children:[(0,o.jsx)(a.lU,{color:c.colors.white,marginRight:"20px",width:"200px",children:"Slippage tolerance"}),(0,o.jsx)("div",{className:"flex w-full justify-center",children:F.map((e,l)=>(0,o.jsx)("div",{className:"mr-3",children:(0,o.jsx)(I.x,{variant:"default",variantStyle:"primary",size:"small",className:"font-bold",onClick:()=>{n({...t,slippage:e.value})},children:e.label})},"slip_button_".concat(l)))})]})]})})},M=l(12275);let U=[O.N.WBNB],W=[O.N.USDC],H=(e,t)=>e===M.fI.dynL1BNB?U:e===M.fI.dynDYDX?W:t;var Z=e=>{var t,l,n,r,d,c,u,p;let{dynaset:h,dynasetCurrentPrice:x,dynasetAssetsTokens:v,isBySpecificToken:y,redeemAmount:g,handleMaxClick:b,handleSetRedeemAmount:w,forgeV1:j,forgeV2:R,isV1:N,selectedRedeemToken:k,selectedForgeToken:C,handleSetSelectedForgeToken:O,setIsV1:_,handleSetSelectedRedeemToken:I,isFromWallet:L,capitalSlashSummary:F,slippage:M,setSlippage:U}=e,{t:W}=(0,S.$G)("common"),[,Z]=(0,s.hQ)(),[V,G]=(0,i.useState)([]),z=H(h,v),Y=N?j:R;return(0,i.useEffect)(()=>{if(j||R){let e=(0,E.g)(null==j?void 0:j.tokens,null==R?void 0:R.tokens);G(e)}else G([])},[j,R]),(0,i.useEffect)(()=>{(null==V?void 0:V.length)&&!C&&(O(V[0]),_(V[0].label.includes("Q1 2023")))},[V]),(0,i.useEffect)(()=>{z.length>0&&!k&&I(z[0])},[z,k]),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center justify-between py-5",children:[L&&(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)(a.oW,{marginBottom:"4px",color:Z.colors.white,children:["LP token balance in my wallet:"," "]}),(0,o.jsxs)(a.oW,{color:Z.colors.white,children:[Y?Y.userLps:"0"," ",h]})]}),(0,o.jsxs)("div",{className:"ml-10",children:[(0,o.jsxs)(a.oW,{marginBottom:"4px",color:Z.colors.white,children:["Approx in USD:"," "]}),(0,o.jsxs)(a.oW,{color:Z.colors.white,children:[(0,D._B)(Y?B((null==Y?void 0:Y.userLps)||"0",x||"0"):"0")," "]})]})]}),!L&&(0,o.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)(a.oW,{marginBottom:"4px",color:Z.colors.white,children:["Select forge:"," "]}),(0,o.jsx)(a.nN,{color:Z.colors.white,children:(0,o.jsx)(f,{value:C,onChange:function(e){e&&(_(e.label.includes("Q1 2023")),O({label:null==e?void 0:e.label,value:null==e?void 0:e.value}))},options:V,noBorder:!1,hasLeftBorder:!0,size:"large"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)(a.oW,{marginBottom:"4px",color:Z.colors.white,children:["LP token balance in the forge:"," "]}),(0,o.jsxs)(a.oW,{color:Z.colors.white,children:[Y&&C&&(null===(t=Y.tokens[null==C?void 0:C.value])||void 0===t?void 0:null===(l=t.userInfo)||void 0===l?void 0:l.dynasetsOwed)||"0"," ",h]})]}),(0,o.jsxs)("div",{className:"mt-5",children:[(0,o.jsxs)(a.oW,{marginBottom:"4px",color:Z.colors.white,children:["Approx in USD:"," "]}),(0,o.jsxs)(a.oW,{color:Z.colors.white,children:[(0,D._B)(Y&&C?B((null===(n=Y.tokens[null==C?void 0:C.value])||void 0===n?void 0:null===(r=n.userInfo)||void 0===r?void 0:r.dynasetsOwed)||"0",x||"0"):"0")," "]})]})]})]})]}),(0,o.jsxs)("div",{className:"input-wrapper",children:[(0,o.jsxs)(T.I.FieldGroup,{className:"font-Poppins w-full rounded-lg border-0  border-2 bg-backgroundPrimary pl-[13px] text-sm font-normal leading-[22px] text-white",children:[(0,o.jsxs)("div",{className:"flex h-14 items-center justify-center rounded-l-lg border-r-2 border-white pl-[13px] pr-[12px]",children:[(0,o.jsx)(T.I.Field,{value:g,type:"number",onChange:w,disabled:!Y,placeholder:"Please enter",className:"font-Poppins h-14 w-full bg-transparent text-[16px] font-normal leading-[22px]"}),(0,o.jsx)("button",{className:"font-Poppins text-sm font-normal leading-[22px] text-light-input-fill dark:text-textDark-secondary ",onClick:b,children:(0,o.jsx)("div",{className:"flex items-center justify-center  pl-[13px] pr-[12px]",children:(0,o.jsx)("p",{className:"font-bold text-[#36bffa]",children:W("MAX")})})})]}),(0,o.jsxs)("div",{className:"flex h-14 items-center justify-center border-0 border-white  pl-[13px] pr-[12px]",children:[(0,o.jsx)(m.T,{token:h}),h]})]}),(0,o.jsxs)("div",{className:"pt-1 text-right",style:{color:Z.colors.white,fontSize:Z.sizing.scale500},children:["Balance:"," ",(0,o.jsxs)("span",{className:"cursor-point ml-1 text-primary",onClick:b,children:[Y?L?null!==(u=Y.userLps)&&void 0!==u?u:"0":null!==(p=C&&(null===(d=null==Y?void 0:Y.tokens[null==C?void 0:C.value])||void 0===d?void 0:null===(c=d.userInfo)||void 0===c?void 0:c.dynasetsOwed))&&void 0!==p?p:"0":"0"," ",h]})]})]}),y&&(0,o.jsx)("div",{children:(0,o.jsx)("div",{children:(0,o.jsx)(A.Z,{label:"Select your token",overrides:{Label:{style:e=>{let{$theme:t}=e;return{fontSize:t.sizing.scale500,color:t.colors.white,marginBottom:"0"}}}},children:(0,o.jsx)(f,{value:k,onChange:e=>I(e.value),options:z,noBorder:!1,hasLeftBorder:!0})})})}),(0,o.jsx)(P,{slippage:M,setSlippage:U,selectedToken:k,redeemAmount:g,capitalSlashSummary:F})]})},V=l(33971),G=l(73789);let z=(e,t,l,o)=>{let n;let r=new c.Z(t).minus(e),i=r.times(o);return Number(l)&&(n=i.dividedBy(l)),{usdValue:i.toFixed(),amount:n||new c.Z("0")}},Y=(e,t,l)=>{let o=1-Number(e)/100,n=t.times(o),r=n.times(l),i=r.dividedBy(l);return{usdValue:r.toFixed(),amount:i.toFixed()}},X=(e,t,l,o,n)=>{var r;let i;let s=z(t,l,o,n);return i=Number(o)>0?Y(e,s.amount,o):{usdValue:"0",amount:"0"},{output:{...s,amount:null===(r=s.amount)||void 0===r?void 0:r.toFixed()},slippage:e,minimumAmount:i}},K=(e,t)=>new c.Z(e).times(new c.Z(10).exponentiatedBy(t)).toFixed(0);var J=l(5908);let Q={output:{usdValue:"0",amount:"0"},slippage:"0.5",minimumAmount:{usdValue:"0",amount:"0"}};var q=e=>{let{handleModalClose:t,dynaset:l,dynasetCurrentPrice:n,dynasetAssetsTokens:r,forgeV1:u,forgeV2:m,refreshForge:p}=e,h=(0,w.pm)(),{t:x}=(0,S.$G)("common"),v=(0,J.Z)(),f=(0,g.d)(),[,b]=(0,s.hQ)(),[E,j]=(0,i.useState)("0"),[R,N]=(0,i.useState)(!1),[k,C]=(0,i.useState)(""),[T,A]=(0,i.useState)(null),[B,D]=(0,i.useState)(null),[_,I]=(0,i.useState)(null),[F,P]=(0,i.useState)(!1),[M,U]=(0,i.useState)(Q),[W,H]=(0,i.useState)();(0,i.useEffect)(()=>{if((u||m)&&k&&Number(k)>0){var e,t,o;let r=$(u,m),i=u?null===(e=u.tokens[r[0]])||void 0===e?void 0:e.capitalSlash:null===(t=m.tokens[r[0]])||void 0===t?void 0:t.capitalSlash,s=i/100,a=new c.Z(k).times(s);H(a);let d=null===(o=new c.Z(a).times(n))||void 0===o?void 0:o.decimalPlaces(2);I(Number(i)>0?{capitalSlash:i,tokenAmountSlashed:"".concat(a," ").concat(l),approxUSD:"".concat(d)}:null)}else I(null)},[k]),(0,i.useEffect)(()=>{if(W&&B&&k&&Number(k)>0){var e,t;let o="dynL1BNB"===l&&B===O.N.USDT?"BUSDT":B,i=null===(e=r.find(e=>{let{token:t}=e;return(null==t?void 0:t.symbol)===o}))||void 0===e?void 0:null===(t=e.token)||void 0===t?void 0:t.usdPrice;i||h({title:x("ERROR_MESSAGES.ERROR"),description:"".concat(x("ERROR_MESSAGES.NO_USD_PRICE_FOUND")," ").concat(B,". ").concat(x("ERROR_MESSAGES.UNFORTUNATELY_YOU_WILL_NOT_BE_ABLE_TO_REDEEM")," "),type:"error"}),U(X(M.slippage,W,k,i||"0",n))}},[k,B,W,M.slippage,r,n]);let z=(0,i.useMemo)(()=>{if(r)return r.map(e=>{let{token:t}=e;return null==t?void 0:t.symbol})},[r]),Y=e=>{var t;let l=null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value;C(l)},q=e=>{try{var t,l,o,n;let r=R?u:m,i=r?e?null!==(o=r.userLps)&&void 0!==o?o:"0":null!==(n=T&&(null===(t=null==r?void 0:r.tokens[null==T?void 0:T.value])||void 0===t?void 0:null===(l=t.userInfo)||void 0===l?void 0:l.dynasetsOwed))&&void 0!==n?n:"0":"0";C(i)}catch(e){C("0")}},et=async()=>{try{P(!0);let e=R?u:m,l=await e.tokens[B].redeem(new c.Z(k).times(new c.Z(10).exponentiatedBy(18)).toFixed(0),B,!0,K(M.minimumAmount.amount,e.tokens[B].decimals));await (null==l?void 0:l.wait());let n=await l.wait();h({title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.dy,{symbol:127881})," ",x("ERROR_MESSAGES.REDEEMED_SUCCESSFULLY"),"."]}),hash:null==n?void 0:n.transactionHash,type:"success"}),await p(),P(!1),t({type:"success"})}catch(t){var e;P(!1),h({title:x("ERROR_MESSAGES.ERROR"),description:"".concat(x("ERROR_MESSAGES.REDEEM_FAILED")," : ").concat(JSON.stringify(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:"")),type:"error",icon:"block"})}},el=async()=>{try{P(!0);let e=R?u:m,l=await e.tokens[null==T?void 0:T.value].redeem(new c.Z(k).times(new c.Z(10).exponentiatedBy(18)).toFixed(0),B,!1,K(M.minimumAmount.amount,e.tokens[B].decimals));await (null==l?void 0:l.wait());let n=await l.wait();h({title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.dy,{symbol:127881})," ",x("ERROR_MESSAGES.REDEEMED_SUCCESSFULLY_FROM_FORGE"),"."]}),hash:null==n?void 0:n.transactionHash,type:"success"}),await p(),P(!1),t({type:"success"})}catch(e){P(!1),h({title:x("ERROR_MESSAGES.ERROR"),description:x("ERROR_MESSAGES.REDEEMED_FAILED"),type:"error"})}},eo=async()=>{try{P(!0);let e=R?u:m,t=await e.approve();await (null==t?void 0:t.wait()),await p(),P(!1),h({title:x("ERROR_MESSAGES.APPROVED_SUCCESSFULLY"),hash:null==t?void 0:t.hash,type:"success"})}catch(e){P(!1),h({title:x("ERROR_MESSAGES.ERROR"),description:x("ERROR_MESSAGES.APPROVAL_FAILED"),type:"error"})}},en=()=>{let e=R?u:m,t=(null==e?void 0:e.allowance)||"0",l=new c.Z(t);if(l.isZero())return!0;let o=(0,L.jE)(k,18);return!isNaN(Number(o))&&l.comparedTo(new c.Z(o))===L.Ym.LESSER};return(0,o.jsxs)("div",{style:{width:f?y.Y:y.iR},children:[(0,o.jsx)(d.r,{title:"Redeem",handleModalClose:t,showClose:!1}),(0,o.jsxs)(V.Z,{onChange:e=>{let{activeKey:t}=e;j(t),C("")},activeKey:E,overrides:v,children:[(0,o.jsxs)(G.Z,{title:"From Forge",children:[" ",(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"my-2 px-2",children:(0,o.jsxs)(a.lU,{color:b.colors.white,children:[(0,o.jsxs)("span",{className:"flex flex-col",children:[x("IF_YOU_HAVE_WITHDRAWN_YOUR_DYNASET_LP_TOKENS_FROM_THE_FORGE"),(0,o.jsxs)("span",{className:"my-2",children:[x("FORM.SELECT"),":"]})]}),(0,o.jsxs)("li",{children:[x("THE_FORGE_DEPOSITED_TOKENS"),"."]}),(0,o.jsx)("li",{children:x("THE_FORGE_DEPOSITED_TOKENS_DESCRIPTION")})]})}),(0,o.jsx)("div",{className:"px-5",children:(0,o.jsx)(Z,{dynaset:l,dynasetCurrentPrice:n,dynasetAssetsTokens:z,redeemAmount:k,handleMaxClick:()=>q(!1),handleSetRedeemAmount:Y,isBySpecificToken:!0,forgeV1:u,forgeV2:m,isV1:R,setIsV1:N,selectedForgeToken:T,selectedRedeemToken:B,handleSetSelectedForgeToken:A,handleSetSelectedRedeemToken:D,isFromWallet:!1,capitalSlashSummary:_,slippage:M,setSlippage:U})}),(0,o.jsx)(d.n,{primaryActionLabel:T?new c.Z(ee(R,u,m,null==T?void 0:T.value)).isLessThan(k)?x("REDEEM"):en()?x("APPROVE"):x("REDEEM_FROM_FORGE"):x("APPROVE"),primaryActionOnClick:T?new c.Z(ee(R,u,m,null==T?void 0:T.value)).isLessThan(k)?el:en()?eo:el:eo,disablePrimaryAction:!T||new c.Z(ee(R,u,m,null==T?void 0:T.value)).plus((R?null==u?void 0:u.userLps:null==m?void 0:m.userLps)||"0").isLessThan(k),isLoading:F,handleModalClose:t})]})]}),(0,o.jsx)(G.Z,{title:"From Wallet",children:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"my-2 px-2",children:(0,o.jsxs)(a.lU,{color:b.colors.white,children:[(0,o.jsxs)("span",{className:"flex flex-col",children:[x("WITHDRAW_YOUR_DYNASET_LP_TOKENS_FROM_THE_FORGE"),(0,o.jsxs)("span",{className:"my-2",children:[x("FORM.SELECT"),":"]})]}),(0,o.jsx)("span",{children:x("TOKEN_TO_REDEEM")})]})}),(0,o.jsx)("div",{className:"px-5",children:(0,o.jsx)(Z,{dynaset:l,dynasetCurrentPrice:n,dynasetAssetsTokens:z,redeemAmount:k,handleMaxClick:()=>q(!0),handleSetRedeemAmount:Y,isBySpecificToken:!0,forgeV1:u,forgeV2:m,isV1:R,setIsV1:N,selectedForgeToken:T,selectedRedeemToken:B,handleSetSelectedForgeToken:A,handleSetSelectedRedeemToken:D,isFromWallet:!0,capitalSlashSummary:_,slippage:M,setSlippage:U})}),(0,o.jsx)(d.n,{primaryActionLabel:en()?x("APPROVE"):x("REDEEM_FROM_WALLET"),primaryActionOnClick:en()?eo:et,disablePrimaryAction:!B||!k||new c.Z(ee(R,u,m,B)).plus((R?null==u?void 0:u.userLps:null==m?void 0:m.userLps)||"0").isLessThan(k)||F,isLoading:F,handleModalClose:t})]})})]})]})};let $=(e,t)=>{let l=[];return e&&(l=[...Object.keys(e.tokens)]),t&&(l=[...l,...Object.keys(t.tokens)]),l},ee=(e,t,l,o)=>{var n,r;return e?t?null===(r=t.tokens[o])||void 0===r?void 0:r.lpBalance:"0":l?null===(n=l.tokens[o])||void 0===n?void 0:n.lpBalance:"0"};var et=l(59435),el=l(37023),eo=l(89644),en=l.n(eo),er=l(58094);let ei=["ETH","WETH","WBTC","USDC","USDT","DAI","UNI","COMP","CRV","LINK","AAVE","1INCH","MKR","ELON","SHIB"],es=e=>e.sort((e,t)=>ei.indexOf(e)-ei.indexOf(t)),ea=async e=>{try{await en().post("https://hooks.slack.com/services/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",JSON.stringify(e),{timeout:1e4,transformRequest:(e,t)=>(delete t.common["Content-Type"],e)})}catch(e){console.error("failed to notify ".concat(e))}};var ed=l(34406);let ec=[M.fI.dynDYDX,M.fI.dynETHc,M.fI.dynETH],eu=["ETH","WETH","USDC"];var em=e=>{let{handleModalClose:t,dynasetSymbol:l,account:n,forgeV2:r,refreshForge:m}=e,p=(0,w.pm)(),{t:x}=(0,S.$G)("common"),[v,b]=(0,s.hQ)(),E=(0,g.d)(),[j,R]=(0,i.useState)("0"),[N,k]=(0,i.useState)(""),[C,T]=(0,i.useState)(),[A,D]=(0,i.useState)(!1),[_,I]=(0,i.useState)("0"),[F,P]=(0,i.useState)("0"),[M,U]=(0,i.useState)(""),[W,H]=(0,i.useState)(!1),[Z,V]=(0,i.useState)(!1),[G,z]=(0,i.useState)(!1),[Y,X]=(0,i.useState)(!1),K=ec.includes(l)?eu:es(Object.keys((null==r?void 0:r.tokens)||{})||[]).filter(e=>"BUSD"!==e);(0,i.useEffect)(()=>{K.length>0&&!C&&(T(K[0]),Q())},[K]),(0,i.useEffect)(()=>{C&&r?(Q(),q()):(k(""),R("0"),I("0"))},[r,n,C]);let J=e=>{var t;if(!C)return;let l=(null===(t=null==r?void 0:r.tokens[C])||void 0===t?void 0:t.tokenPrice)||"0";P("".concat((0,L.dq)(B(e,l),2,!0)))},Q=()=>{var e,t,l,o;if(r&&C&&(null===(e=null==r?void 0:r.tokens[C])||void 0===e?void 0:e.tokenBalance)){if(C===O.N.ETH||C===O.N.BNB){let e=null===(t=null==r?void 0:r.tokens[C])||void 0===t?void 0:t.decimals,o=null===(l=null==r?void 0:r.tokens[C])||void 0===l?void 0:l.tokenBalance,n=Math.pow(10,Number(e)),i=Number(o)/n;R((0,L.dq)(i,6,!0))}else R((0,L.dq)(null===(o=null==r?void 0:r.tokens[C])||void 0===o?void 0:o.tokenBalance,6,!0))}else R("0")},q=()=>{var e,t,l;if(r&&C&&(null===(e=null==r?void 0:r.tokens[C])||void 0===e?void 0:e.minContrib)){let e=null===(t=null==r?void 0:r.tokens[C])||void 0===t?void 0:t.decimals,o=null===(l=null==r?void 0:r.tokens[C])||void 0===l?void 0:l.minContrib,n=Number(o)*Math.pow(10,-Number(e));I((0,L.dq)(Math.ceil(1e6*n)/1e6,6,!0))}else I("0")},$=async()=>{try{if(V(!0),!C)return;let e=await r.tokens[C].deposit(new c.Z(N).times(new c.Z(10).exponentiatedBy(r.tokens[C].decimals)).toFixed(0));await e.wait();let o="";if(o="You have successfully deposited ".concat(N," ").concat(C," to the DynaSet"),e&&0===M.length){let t={blocks:[{type:"context",elements:[{type:"mrkdwn",text:"*".concat(null==e?void 0:e.from,"* has deposited ").concat(N," ").concat(C," with no referral in ").concat(l," on chainId ").concat(null==e?void 0:e.chainId,". TX Hash: ").concat(null==e?void 0:e.hash)}]}]};await ea(t)}if(e&&M.length>0){let t={referral_code:M,chain_id:null==e?void 0:e.chainId,transaction_hash:null==e?void 0:e.hash},l=await ei(t);l&&(o="You have successfully deposited ".concat(N," ").concat(C," to the DynaSet with referral code '").concat(M,"'."))}V(!1),k("0"),await m(),t({type:"success",message:"".concat(o),selectedToken:C})}catch(r){var e,o;let t;let l={blocks:[{type:"context",elements:[{type:"mrkdwn",text:"*Error* has failed to deposit ".concat(N," ").concat(C,". ").concat(r)}]}]};await ea(l),V(!1);let n=(0,er.serializeError)(r);t=(null==n?void 0:null===(e=n.data)||void 0===e?void 0:null===(o=e.originalError)||void 0===o?void 0:o.reason)?"execution reverted: ERR_AMOUNT_BELOW_MINCONTRIBUTION"===n.data.originalError.reason?"You tried to deposit below the minimum amount allowed. Please use the MIN button in the deposit popup to see the minimum authorized per forge.":n.data.originalError.reason:"An unknown error occurred",p({title:x("ERROR_MESSAGES.ERROR"),description:"Failed. Code: ".concat(n.code," Reason: ").concat(t),type:"error"})}},ee=()=>{H(!1),U("")},eo=async()=>{try{if(z(!0),!C)return;let e=await r.tokens[C].approve();await e.wait(),await m(),Q(),p({title:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(w.dy,{symbol:127881})," ",x("ERROR_MESSAGES.YOUR_TXT_APPROVED")]}),description:x("ERROR_MESSAGES.YOU_HAVE_APPROVED"),type:"success",hash:null==e?void 0:e.hash}),z(!1),X(!0)}catch(e){p({title:x("ERROR_MESSAGES.ERROR"),description:x("ERROR_MESSAGES.FAILED_TO_APPROVE"),type:"error"}),z(!1)}},ei=async e=>{try{return await en().post("".concat(ed.env.NEXT_PUBLIC_SERVER_ENDPOINT,"/referral"),JSON.stringify(e),{headers:{Accept:"application/json","Content-Type":"application/json"}})}catch(e){return e}};return(0,o.jsxs)("div",{style:{width:E?y.Y:y.iR,background:"transparent"},children:[(0,o.jsx)(d.r,{title:"Deposit",handleModalClose:t,showClose:!1}),(0,o.jsxs)("div",{className:"px-5 py-3",children:[(0,o.jsx)(a.lU,{color:b.colors.white,children:x("DEPOSIT_INFO")}),(0,o.jsxs)("div",{className:"input-wrapper my-10",children:[(0,o.jsx)(u.Z,{value:N,onChange:e=>{var t;let l=null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value;k(l),J(l)},endEnhancer:()=>(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"border-r border-solid border-primary pr-1.5 text-blue-300",onClick:()=>{k(_.replace(/,/g,"")||"0"),J(_.replace(/,/g,"")||"0")},children:x("MIN")}),(0,o.jsx)("div",{className:"border-r border-solid border-white pl-1.5 pr-1.5 text-blue-300",onClick:()=>{k(j.replace(/,/g,"")||"0"),J(j.replace(/,/g,"")||"0")},children:x("MAX")}),(0,o.jsx)(f,{value:C,onChange:e=>{T(e.value),J("0"),k(""),X(!1)},options:K,noBorder:!0})]}),placeholder:"Please enter",type:"number",overrides:{Root:{style:e=>{let{$theme:t}=e;return{paddingRight:"0px",borderColor:t.colors.white,borderRadius:t.borders.radius300,display:"flex"}}},Input:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundPrimary,color:b.colors.white,fontSize:"14px"}}},EndEnhancer:{style:e=>{let{$theme:t}=e;return{cursor:"pointer",backgroundColor:t.colors.backgroundPrimary,fontWeight:t.typography.font150.fontWeight,fontSize:b.sizing.scale600,letterSpacing:"0.2px",color:b.colors.contentTertiary}}}}}),(0,o.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,o.jsx)("div",{className:"ml-4 pt-1 text-left",style:{color:b.colors.mono500,fontSize:b.sizing.scale500},children:F?"$".concat(F):"$0"}),(0,o.jsxs)("div",{className:"pt-1 text-right",style:{color:b.colors.white,fontSize:b.sizing.scale500,cursor:"pointer"},onClick:()=>{k(j.replace(/,/g,"")||"0"),J(j.replace(/,/g,"")||"0")},children:[x("BALANCE"),":",(0,o.jsxs)("span",{className:"text-primary",children:[" ",j||"0"," ",C]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:!W&&(0,o.jsxs)(a.oW,{onClick:()=>H(!0),className:v({marginLeft:b.sizing.scale100,textDecoration:"underline"}),marginBottom:"4px",color:b.colors.accent200,children:[x("ADD_REFERRAL_CODE")," +"]})}),W&&(0,o.jsxs)("div",{children:[(0,o.jsx)(a.oW,{marginBottom:"4px",color:b.colors.white,children:x("REFERRAL_CODE")}),(0,o.jsx)(u.Z,{value:M,onChange:e=>{var t;let l=null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value;U(l)},placeholder:"Please enter code",overrides:{Root:{style:e=>{let{$theme:t}=e;return{paddingRight:"0px",borderColor:t.colors.white,borderRadius:t.borders.radius300}}},Input:{style:e=>{let{$theme:t}=e;return{backgroundColor:t.colors.backgroundPrimary,color:b.colors.white,fontSize:"14px"}}},EndEnhancer:{style:e=>{let{$theme:t}=e;return{cursor:"pointer",backgroundColor:t.colors.backgroundPrimary,fontWeight:t.typography.font150.fontWeight,fontSize:b.sizing.scale600,letterSpacing:"0.2px",color:b.colors.contentTertiary}}}}})]}),W&&(0,o.jsx)(a.oW,{onClick:()=>ee(),marginTop:"8px",className:v({marginLeft:b.sizing.scale100,textDecoration:"underline"}),marginBottom:"4px",color:b.colors.accent200,children:x("REMOVE")})]})]}),(0,o.jsx)("div",{children:(0,o.jsx)(et.u,{content:()=>(0,o.jsx)(h.Z,{padding:"20px",children:x("AGREE_TERMS")}),children:(0,o.jsx)(el.XZ,{checked:A,onClick:()=>D(e=>!e),children:(0,o.jsxs)("span",{className:v({...b.typography.font200,fontWeight:"400",cursor:"auto",color:"white"}),children:[x("I_AGREE"),(0,o.jsx)("a",{href:"/pdf/terms-and-conditions.pdf",target:"_blank",rel:"noreferrer noopener",className:v({marginLeft:b.sizing.scale100,color:b.colors.accent200,textDecoration:"underline"}),children:x("GENERAL_TERMS")})]})})})})]}),(()=>{var e,t,l;if(!r)return!1;let o=null===(e=Object.entries(null==r?void 0:r.tokens))||void 0===e?void 0:e.find(e=>{let[t]=e;return C===t});if(o&&(null===(t=o[1])||void 0===t?void 0:t.isEth)||!C)return!1;let n=null===(l=null==r?void 0:r.tokens[C])||void 0===l?void 0:l.allowance,i=new c.Z(n);if(i.isZero())return!0;let s=(0,L.jE)(N,18);return!isNaN(Number(s))&&!Y&&i.comparedTo(new c.Z(s))!==L.Ym.LESSER})()?(0,o.jsx)(d.n,{primaryActionLabel:"Approve",primaryActionOnClick:eo,handleModalClose:t,disablePrimaryAction:!A||G||!r,isLoading:G,loadingText:"Approving"}):(0,o.jsx)(d.n,{primaryActionLabel:"Deposit",primaryActionOnClick:$,handleModalClose:t,isLoading:Z,loadingText:"Depositing",disablePrimaryAction:new c.Z(N).isLessThanOrEqualTo(0)||!A||Z||!r})]})},ep=e=>{let{account:t,forgeV1:l,forgeV2:s,refreshForge:a,isModalOpen:d,setIsModalOpen:c,contentType:u,dynasetSymbol:m,messageOnClose:p,dynasetCurrentPrice:h,dynasetAssetsTokens:x}=e,v=(0,g.d)(),f=(0,i.useCallback)(e=>{(null==e?void 0:e.type)&&p(e),c(!1)},[]);return(0,o.jsx)(n.Z,{closeable:!0,onClose:f,isOpen:d,animate:!0,size:r.NO.auto,role:r.HB.dialog,overrides:{Root:{style:()=>({zIndex:"99",height:v?"calc(100% - ".concat(Number("58"),"px)"):"100%"})},DialogContainer:{style:()=>({zIndex:"53",justifyContent:"center",backgroundColor:"transparent",backdropFilter:"blur(35px)"})},Dialog:{style:e=>{let{$theme:t}=e;return{background:t.colors.backgroundSecondary,backdropFilter:"blur(4px)",borderTopLeftRadius:t.borders.radius300,borderTopRightRadius:t.borders.radius300,borderBottomRightRadius:t.borders.radius300,borderBottomLeftRadius:t.borders.radius300,zIndex:"54"}}},Close:{style:e=>{let{$theme:t}=e;return{color:t.colors.white}}}},children:(0,o.jsxs)("div",{children:[u===C.A.DEPOSIT&&(0,o.jsx)(em,{handleModalClose:f,dynasetSymbol:m,forgeV2:s,refreshForge:a,account:t}),u===C.A.REDEEM&&(0,o.jsx)(q,{handleModalClose:f,dynaset:m,dynasetCurrentPrice:h,dynasetAssetsTokens:x,forgeV1:l,forgeV2:s,refreshForge:a}),u===C.A.WITHDRAW&&(0,o.jsx)(j,{handleModalClose:f,dynaset:m,forgeV1:l,forgeV2:s,refreshForge:a}),u===C.A.INSURE&&(0,o.jsx)(k,{handleModalClose:()=>c(!1)})]})})}},76113:function(e,t,l){l.d(t,{j:function(){return d}});var o=l(89644),n=l.n(o),r=l(72558),i=l(72149);let s={"Access-Control-Allow-Credentials":!0},a={},d=async e=>{if(a[e])return a[e];{let t="".concat(i.vg,"search?query=").concat(e),l="";try{let{data:o}=await n().get(t,s);if(!(null==o?void 0:o.coins))return"0";let{id:r}=o.coins.find(t=>t.symbol===e);if(!r)return"0";l=r}catch(e){return"0"}try{let{data:t}=await n().get("".concat(i.vg,"simple/price?ids=").concat(l,"&vs_currencies=usd"),s),o=new r.Z(t[l].usd).toString();return a[e]=o,o}catch(e){return"0"}}}},18673:function(e,t,l){l.d(t,{S:function(){return b},g:function(){return E}});var o=l(30171),n=l(90711),r=l(2784),i=l(76542),s=l(17129),a=l(32475),d=l(72558),c=l(21674),u=l(76113),m=l(38380),p=l(76558),h=l(41148),x=l(26050),v=l(12275),f=l(45455),y=l.n(f),g=l(88748);let b=function(e,t,l,n){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=(0,s.C)(a.H),[c,u]=(0,r.useState)(null),[p,h]=(0,r.useState)(null),[v,f]=(0,r.useState)(null),{data:g}=(0,x.m)(),b=async()=>{let[n,r]=S(e,l,d);if(t&&n&&r){let e=await t.getSigner();f([new o.CH(n,m,e),new o.CH(r,m,e)])}},E=(0,r.useMemo)(()=>S(e,l,d),[n,d,l,e]);(0,r.useEffect)(()=>{y()(E)?u(null):b()},[E,t,n]);let j=(0,r.useCallback)(async()=>{if(y()(v)){b();return}let[l,o]=E,[r,s]=v;if(r&&l){let o=await w(l,r,n,e,i,g,t,"Q1 2023",!0);u(o)}if(o&&s){let l=await w(o,s,n,e,i,g,t,"Q2 2023",!1);h(l)}},[n,E,v,t,g]);return(0,r.useEffect)(()=>{v&&j()},[E,v,j]),{forgeV1:c,forgeV2:p,refreshForge:j}},w=async(e,t,l,r,i,s,a,m,x)=>{let f,y;try{f=Number((await t.totalForges()).toString())}catch(e){console.error("ERROR: ForgeV1: Could not get totalForge from forge contract. \n ".concat(e)),f="0"}let b=await a.getSigner();try{y=new o.CH(await t.dynaset(),p,b)}catch(e){console.error("ERROR: ForgeV1: Could not get dynaset contract. \n ".concat(e)),y=null;return}let w=[],S={};for(let p=0;p<f;p++)w.push(new Promise(async f=>{let y,w;let E=await t.forgeInfo(p),j=(1e3-await t.capitalSlash(1e3,E.contributionPeriod))/10;E.isEth||(y=new o.CH(E.contributionToken,h.Mt,b));let R=await t.userInfo(p,l),N="-",k=18;if(E.isEth)N=v.ax[r]===g.e.id?c.N.BNB:c.N.ETH;else try{N=await y.symbol(),k=await y.decimals()}catch(e){console.error("ERROR: Could not get the token information from the token contract.\n ".concat(e)),N=c.N.MKR,k=18}let C=new d.Z(R.depositAmount.toString()),T=new d.Z(R.dynasetsOwed.toString()),A=new d.Z(E.dynasetLp.toString()),O="0";if(i)try{O=await (0,u.j)(N)}catch(e){console.warn("ERROR: Could not get the token Price"),O="0"}let B="-",D=null==s?void 0:s.token.find(e=>(null==e?void 0:e.symbol)===N);D&&(B=null==D?void 0:D.usdPrice);let _=N===c.N.ETH||N===c.N.BNB?n.Bz.toString():(await y.allowance(l,t.address)).toString(),I=N===c.N.ETH||N===c.N.BNB?(await a.getBalance(l)).toString():new d.Z((await y.balanceOf(l)).toString()).dividedBy(new d.Z(10).exponentiatedBy(k)).toFixed(6);if(N===c.N.ETH||N===c.N.BNB)w=18;else try{w=await y.decimals()}catch(e){console.warn("ERROR: Could not get the token decimals"),w=0}S[N]={forgeId:"".concat(p),isV1:x,label:m,allowance:_,tokenBalance:I,depositEnabled:E.depositEnabled,withdrawEnabled:E.withdrawEnabled,isEth:E.isEth,forging:E.forging,address:E.contributionToken,tokenPrice:O,decimals:k,minContrib:E.minContribution.toString(),maxContrib:E.maxContribution.toString(),maxCapital:E.maxCap.toString(),totalContribution:E.totalContribution.toString(),approxInUsd:B,capitalSlash:j,lpBalance:A.dividedBy(new d.Z(10).exponentiatedBy(18)).toFixed(2),deposit:N===c.N.ETH||N===c.N.BNB?async e=>t.deposit(p,e,l,{value:e}):async e=>t.deposit(p,e,l),approve:async()=>y.approve(e,n.Bz),withdrawLp:async e=>t.withdrawOutput(p,e),redeem:async function(e,l){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;if(!S[l])return;let r=S[l].address;return o?t.redeemFromWallet(p,e,r,n):t.redeem(p,e,r,n)},userInfo:{depositAmount:C.dividedBy(new d.Z(10).exponentiatedBy(w)).toFixed(6),dynasetsOwed:T.dividedBy(new d.Z(10).exponentiatedBy(18)).toFixed(2)}},f()}));return await Promise.all(w),{totalSupply:new d.Z((await y.totalSupply()).toString()).toFixed(6),approve:async()=>y.approve(e,n.Bz),tokens:S,allowance:(await y.allowance(l,e)).toString(),userLps:new d.Z((await new o.CH(await t.dynaset(),p,b).balanceOf(l)).toString()).div(new d.Z(10).exponentiatedBy(18)).toFixed(6)}},S=(e,t,l)=>{if(e===v.fI.dynSING)return[];let o=i.eG[t]||i.eG[l];if(o&&o.dynasets){var n,r;return[null===(n=o.dynasets[e])||void 0===n?void 0:n.forgeV1,null===(r=o.dynasets[e])||void 0===r?void 0:r.forgeV2]}return[]},E=(e,t)=>{let l=[],o=[];return e&&(l=Object.keys(e).filter(t=>Number(e[t].userInfo.dynasetsOwed)>0).map(t=>({value:t,label:"".concat(t," ").concat(e[t].label)}))),t&&(o=Object.keys(t).filter(e=>Number(t[e].userInfo.dynasetsOwed)>0).map(e=>({value:e,label:"".concat(e," ").concat(t[e].label)}))),[...l,...o]}},5908:function(e,t){t.Z=e=>{var t,l;return{...e||{},TabBar:{style:l=>{var o;let{$theme:n}=l;return{margin:"0px",padding:"0px",...null!==(t=null===(o=null==e?void 0:e.TabBar)||void 0===o?void 0:o.style({$theme:n}))&&void 0!==t?t:{}}}},Tab:{style:t=>{var o;let{$active:n,$theme:r}=t;return{margin:"0px",width:"209px",height:"48px",textAlign:"center",color:r.colors.white,":hover":{color:r.colors.white,borderBottom:"2px solid #36BFFA",textShadow:"0px 0px 16px #36bffa, 0px 0px 8px #36bffa",background:r.colors.backgroundPrimary},...n&&{color:r.colors.white,borderBottom:"2px solid #36BFFA",textShadow:"0px 0px 16px #36bffa, 0px 0px 8px #36bffa",background:r.colors.backgroundPrimary},...null!==(l=null===(o=null==e?void 0:e.Tab)||void 0===o?void 0:o.style({$theme:r}))&&void 0!==l?l:{}}}}}}},15354:function(e,t,l){l.d(t,{I:function(){return d}});var o=l(52322),n=l(2784),r=l(17973),i=l(61335),s=l(20324);let a=n.forwardRef(function(e,t){let{className:l,...n}=e;return(0,o.jsx)("input",{ref:t,...n,className:(0,i.cx)((0,s.m6)("ac-field min-w-[64px] text-xs leading-4 py-[9px] placeholder-grey-400 border-grey-150 outline-none rounded bg-white border px-2",l))})}),d={Wrapper:function(e){let{asChild:t,className:l}=e,n=t?r.g7:"div";return(0,o.jsx)(n,{...e,className:(0,i.cx)((0,s.m6)("flex flex-col gap-1",l))})},Label:function(e){let{asChild:t,className:l}=e,n=t?r.g7:"label";return(0,o.jsx)(n,{...e,className:(0,i.cx)("text-sm font-normal",l)})},Description:function(e){let{asChild:t,className:l}=e,n=t?r.g7:"div";return(0,o.jsx)(n,{...e,className:(0,i.cx)("text-xs text-grey-600",l)})},ErrorMessage:function(e){let{asChild:t,className:l}=e,n=t?r.g7:"div";return(0,o.jsx)(n,{...e,className:(0,i.cx)("text-sm text-danger",l)})},FieldGroup:function(e){let{className:t,...l}=e;return(0,o.jsx)("div",{className:(0,i.cx)((0,s.m6)("flex bg-white border border-grey-150 rounded w-full items-center px-1 [&_.ac-field]:border-none [&_.ac-field]:px-1 [&_.ac-field]:flex-1",t)),...l})},Field:a}}}]);